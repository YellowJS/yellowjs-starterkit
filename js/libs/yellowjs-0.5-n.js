/*
 * YellowJS v0.5 - mobile framework
 * http://yellowjs.org
 */
(function(){my={};my.Class=function(){var e=arguments.length;var d=arguments[e-1];var f=e>1?arguments[0]:null;var j=e>2;var g,c;if(d.constructor===Object){g=function(){}}else{g=d.constructor;delete d.constructor}if(f){c=function(){};c.prototype=f.prototype;g.prototype=new c();g.prototype.constructor=g;g.Super=f;b(g,f,false)}if(j){for(var h=1;h<e-1;h++){b(g.prototype,arguments[h].prototype,false)}}a(g,d);return g};var a=my.extendClass=function(c,e,d){if(e.STATIC){b(c,e.STATIC,d);delete e.STATIC}b(c.prototype,e,d)};var b=function(d,f,c){var e;if(c===false){for(e in f){if(!(e in d)){d[e]=f[e]}}}else{for(e in f){d[e]=f[e]}if(f.toString!==Object.prototype.toString){d.toString=f.toString}}}})();
/*
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var Mustache=(typeof module!=="undefined"&&module.exports)||{};(function(x){x.name="mustache.js";x.version="0.5.0-dev";x.tags=["{{","}}"];x.parse=o;x.compile=f;x.render=w;x.clearCache=v;x.to_html=w;var u=Object.prototype.toString;var g=Array.isArray;var c=Array.prototype.forEach;var h=String.prototype.trim;var k;if(g){k=g}else{k=function(y){return u.call(y)==="[object Array]"}}var t;if(c){t=function(z,A,y){return c.call(z,A,y)}}else{t=function(B,C,A){for(var z=0,y=B.length;z<y;++z){C.call(A,B[z],z,B)}}}var l=/^\s*$/;function d(y){return l.test(y)}var r;if(h){r=function(y){return y==null?"":h.call(y)}}else{var p,j;if(d("\xA0")){p=/^\s+/;j=/\s+$/}else{p=/^[\s\xA0]+/;j=/[\s\xA0]+$/}r=function(y){return y==null?"":String(y).replace(p,"").replace(j,"")}}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function q(y){return String(y).replace(/&(?!\w+;)|[<>"']/g,function(z){return e[z]||z})}function m(E,G,H,A){A=A||"<template>";var I=G.split("\n"),y=Math.max(H-3,0),B=Math.min(I.length,H+3),z=I.slice(y,B);var F;for(var C=0,D=z.length;C<D;++C){F=C+y+1;z[C]=(F===H?" >> ":"    ")+z[C]}E.template=G;E.line=H;E.file=A;E.message=[A+":"+H,z.join("\n"),"",E.message].join("\n");return E}function n(y,G,B){if(y==="."){return G[G.length-1]}var F=y.split(".");var D=F.length-1;var E=F[D];var H,z,C=G.length,A,I;while(C){I=G.slice(0);z=G[--C];A=0;while(A<D){z=z[F[A++]];if(z==null){break}I.push(z)}if(z&&E in z){H=z[E];break}}if(typeof H==="function"){H=H.call(I[I.length-1])}if(H==null&&!B){return""}return H}function a(D,A,F,y,z){var C=n(A,y,true);if(z){if(C==null||C===false||(k(C)&&C.length===0)){D(F())}}else{if(k(C)){t(C,function(G){y.push(G);D(F());y.pop()})}else{if(typeof C==="object"){y.push(C);D(F());y.pop()}else{if(typeof C==="function"){var B=y[y.length-1];var E=function(G){return w(G,B)};D(C.call(B,F(),E)||"")}else{if(C){D(F())}}}}}}function o(aa,C){C=C||{};var L=C.tags||x.tags,M=L[0],H=L[L.length-1];var z=["var line = 1;","\ntry {",'\nsend("'];var G=[],ab=false,Y=false;var W=function(){if(ab&&!Y&&!C.space){while(G.length){z.splice(G.pop(),1)}}else{G=[]}ab=false;Y=false};var T=[],Q,D,N;var V=function(ac){L=r(ac).split(/\s+/);D=L[0];N=L[L.length-1]};var K=function(ac){z.push('");',Q,'\nvar partial = partials["'+r(ac)+'"];',"\nif (partial) {","\n  send(render(partial, stack[stack.length - 1], partials));","\n}",'\nsend("')};var y=function(ae,ac){var ad=r(ae);if(ad===""){throw m(new Error("Section name may not be empty"),aa,J,C.file)}T.push({name:ad,inverted:ac});z.push('");',Q,'\nvar name = "'+ad+'";',"\nvar callback = (function () {","\n  var buffer, send = function (chunk) { buffer.push(chunk); };","\n  return function () {","\n    buffer = [];",'\nsend("')};var F=function(ac){y(ac,true)};var U=function(ad){var ac=r(ad);var af=T.length!=0&&T[T.length-1].name;if(!af||ac!=af){throw m(new Error('Section named "'+ac+'" was never opened'),aa,J,file)}var ae=T.pop();z.push('");','\n    return buffer.join("");',"\n  };","\n})();");if(ae.inverted){z.push("\nsendSection(send,name,callback,stack,true);")}else{z.push("\nsendSection(send,name,callback,stack);")}z.push('\nsend("')};var X=function(ac){z.push('");',Q,'\nsend(findName("'+r(ac)+'", stack));','\nsend("')};var A=function(ac){z.push('");',Q,'\nsend(escapeHTML(findName("'+r(ac)+'", stack)));','\nsend("')};var J=1,Z,E;for(var R=0,S=aa.length;R<S;++R){if(aa.slice(R,R+M.length)===M){R+=M.length;Z=aa.substr(R,1);Q="\nline = "+J+";";D=M;N=H;ab=true;switch(Z){case"!":R++;E=null;break;case"=":R++;H="="+H;E=V;break;case">":R++;E=K;break;case"#":R++;E=y;break;case"^":R++;E=F;break;case"/":R++;E=U;break;case"{":H="}"+H;case"&":R++;Y=true;E=X;break;default:Y=true;E=A}var B=aa.indexOf(H,R);if(B===-1){throw m(new Error('Tag "'+M+'" was not closed properly'),aa,J,C.file)}var P=aa.substring(R,B);if(E){E(P)}var O=0;while(~(O=P.indexOf("\n",O))){J++;O++}R=B+H.length-1;M=D;H=N}else{Z=aa.substr(R,1);switch(Z){case'"':case"\\":Y=true;z.push("\\"+Z);break;case"\n":G.push(z.length);z.push("\\n");W();J++;break;default:if(d(Z)){G.push(z.length)}else{Y=true}z.push(Z)}}}if(T.length!=0){throw m(new Error('Section "'+T[T.length-1].name+'" was not closed properly'),aa,J,C.file)}W();z.push('");',"\nsend(null);","\n} catch (e) { throw {error: e, line: line}; }");var I=z.join("").replace(/send\(""\);\n/g,"");if(C.debug){if(typeof console!="undefined"&&console.log){console.log(I)}else{if(typeof print==="function"){print(I)}}}return I}function s(C,A){var z="view,partials,send,stack,findName,escapeHTML,sendSection,render";var y=o(C,A);var B=new Function(z,y);return function(F,G,J){if(typeof G==="function"){J=G;G={}}G=G||{};var E=[];var I=J||function(K){E.push(K)};var D=[F];try{B(F,G,I,D,n,q,a,w)}catch(H){throw m(H.error,C,H.line,A.file)}return E.join("")}}var b={};function v(){b={}}function f(z,y){y=y||{};if(y.cache!==false){if(!b[z]){b[z]=s(z,y)}return b[z]}return s(z,y)}function w(A,y,z,B){return f(A)(y,z,B)}})(Mustache);var Lawnchair=function(){if(!JSON){throw"JSON unavailable! Include http://www.json.org/json2.js to fix."}if(arguments.length<=2&&arguments.length>0){var j=typeof arguments[0]==="function"?arguments[0]:arguments[1],o=typeof arguments[0]==="function"?{}:arguments[0]}else{throw"Incorrect # of ctor args!"}if(typeof j!=="function"){throw"No callback was provided"}var m=!(this instanceof Lawnchair)?new Lawnchair(o,j):this;m.record=o.record||"record";m.name=o.name||"records";var h;if(o.adapter){h=Lawnchair.adapters[m.indexOf(Lawnchair.adapters,o.adapter)];h=h.valid()?h:undefined}else{for(var n=0,l=Lawnchair.adapters.length;n<l;n++){if(h=Lawnchair.adapters[n].valid()?Lawnchair.adapters[n]:undefined){break}}}if(!h){throw"No valid adapter."}for(var k in h){m[k]=h[k]}n=0;for(l=Lawnchair.plugins.length;n<l;n++){Lawnchair.plugins[n].call(m)}m.init(o,j);return m};Lawnchair.adapters=[];Lawnchair.adapter=function(g,k){k.adapter=g;var h="adapter valid init keys save batch get exists all remove nuke".split(" "),f=this.prototype.indexOf,j;for(j in k){if(f(h,j)===-1){throw"Invalid adapter! Nonstandard method: "+j}}Lawnchair.adapters.push(k)};Lawnchair.plugins=[];Lawnchair.plugin=function(b){for(var d in b){d==="init"?Lawnchair.plugins.push(b[d]):this.prototype[d]=b[d]}};Lawnchair.prototype={isArray:Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},indexOf:function(f,h,g,d){if(f.indexOf){return f.indexOf(h)}g=0;for(d=f.length;g<d;g++){if(f[g]===h){return g}}return -1},lambda:function(b){return this.fn(this.record,b)},fn:function(b,d){return typeof d=="string"?new Function(b,d):d},uuid:function(){var b=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()},each:function(b){var f=this.lambda(b);if(this.__results){b=0;for(var d=this.__results.length;b<d;b++){f.call(this,this.__results[b],b)}}else{this.all(function(a){for(var e=0,c=a.length;e<c;e++){f.call(this,a[e],e)}})}return this}};Lawnchair.adapter("dom",{valid:function(){return !!window.Storage},init:function(b,f){this.storage=window.localStorage;var d=this;this.indexer={key:d.name+"._index_",all:function(){JSON.parse(d.storage.getItem(this.key))==null&&d.storage.setItem(this.key,JSON.stringify([]));return JSON.parse(d.storage.getItem(this.key))},add:function(a){var c=this.all();c.push(a);d.storage.setItem(this.key,JSON.stringify(c))},del:function(a){for(var k=this.all(),j=[],e=0,c=k.length;e<c;e++){k[e]!=a&&j.push(k[e])}d.storage.setItem(this.key,JSON.stringify(j))},find:function(a){for(var h=this.all(),e=0,c=h.length;e<c;e++){if(a===h[e]){return e}}return false}};f&&this.fn(this.name,f).call(this,this)},save:function(b,f){var d=b.key||this.uuid();this.indexer.find(d)||this.indexer.add(d);delete b.key;this.storage.setItem(d,JSON.stringify(b));if(f){b.key=d;this.lambda(f).call(this,b)}return this},batch:function(g,k){for(var h=[],f=0,j=g.length;f<j;f++){this.save(g[f],function(a){h.push(a)})}k&&this.lambda(k).call(this,h);return this},keys:function(){callback&&this.lambda(callback).call(this,this.indexer.all())},get:function(h,m){if(this.isArray(h)){for(var k=[],g=0,l=h.length;g<l;g++){var j=JSON.parse(this.storage.getItem(h[g]));if(j){j.key=h[g];k.push(j)}}m&&this.lambda(m).call(this,k)}else{if(j=JSON.parse(this.storage.getItem(h))){j.key=h}m&&this.lambda(m).call(this,j)}return this},all:function(h){for(var m=this.indexer.all(),k=[],g,l=0,j=m.length;l<j;l++){g=JSON.parse(this.storage.getItem(m[l]));g.key=m[l];k.push(g)}h&&this.fn(this.name,h).call(this,k);return this},remove:function(b,f){var d=typeof b==="string"?b:b.key;this.indexer.del(d);this.storage.removeItem(d);f&&this.lambda(f).call(this);return this},nuke:function(b){this.all(function(f){for(var d=0,a=f.length;d<a;d++){this.remove(f[d])}b&&this.lambda(b).call(this)});return this}});Lawnchair.adapter("window-name",function(b,f){var d=window.top.name?JSON.parse(window.top.name):{};return{valid:function(){return typeof window.top.name!="undefined"},init:function(a,c){d[this.name]={index:[],store:{}};b=d[this.name].index;f=d[this.name].store;this.fn(this.name,c).call(this,this)},keys:function(a){this.fn("keys",a).call(this,b);return this},save:function(a,e){var c=a.key||this.uuid();a.key&&delete a.key;this.exists(c,function(h){h||b.push(c);f[c]=a;window.top.name=JSON.stringify(d);if(e){a.key=c;this.lambda(e).call(this,a)}});return this},batch:function(a,k){for(var j=[],e=0,c=a.length;e<c;e++){this.save(a[e],function(g){j.push(g)})}k&&this.lambda(k).call(this,j);return this},get:function(a,k){var j;if(this.isArray(a)){j=[];for(var e=0,c=a.length;e<c;e++){j.push(f[a[e]])}}else{if(j=f[a]){j.key=a}}k&&this.lambda(k).call(this,j);return this},exists:function(a,c){this.lambda(c).call(this,!!f[a]);return this},all:function(a){for(var k=[],j=0,e=b.length;j<e;j++){var c=f[b[j]];c.key=b[j];k.push(c)}this.fn(this.name,a).call(this,k);return this},remove:function(a,k){for(var j=this.isArray(a)?a:[a],e=0,c=j.length;e<c;e++){delete f[j[e]];b.splice(this.indexOf(b,j[e]),1)}window.top.name=JSON.stringify(d);k&&this.lambda(k).call(this);return this},nuke:function(a){storage={};b=[];window.top.name=JSON.stringify(d);a&&this.lambda(a).call(this);return this}}}());
/*
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var s=Math,d=function(m){return m>>0},w=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":(/trident/i).test(navigator.userAgent)?"ms":"opera" in window?"O":"",x=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),c=(/playbook/gi).test(navigator.appVersion),o=(/hp-tablet/gi).test(navigator.appVersion),l="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),v="ontouchstart" in window&&!o,f=w+"Transform" in document.documentElement.style,g=j||c,p=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),n=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),h="onorientationchange" in window?"orientationchange":"resize",b=v?"touchstart":"mousedown",q=v?"touchmove":"mousemove",e=v?"touchend":"mouseup",u=v?"touchcancel":"mouseup",r=w=="Moz"?"DOMMouseScroll":"mousewheel",a="translate"+(l?"3d(":"("),k=l?",0)":")",t=function(z,m){var A=this,B=document,y;A.wrapper=typeof z=="object"?z:B.getElementById(z);A.wrapper.style.overflow="hidden";A.scroller=A.wrapper.children[0];A.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:x,hideScrollbar:j,fadeScrollbar:j&&l,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(C){C.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(y in m){A.options[y]=m[y]}A.x=A.options.x;A.y=A.options.y;A.options.useTransform=f?A.options.useTransform:false;A.options.hScrollbar=A.options.hScroll&&A.options.hScrollbar;A.options.vScrollbar=A.options.vScroll&&A.options.vScrollbar;A.options.zoom=A.options.useTransform&&A.options.zoom;A.options.useTransition=g&&A.options.useTransition;if(A.options.zoom&&x){a="translate(";k=")"}A.scroller.style[w+"TransitionProperty"]=A.options.useTransform?"-"+w.toLowerCase()+"-transform":"top left";A.scroller.style[w+"TransitionDuration"]="0";A.scroller.style[w+"TransformOrigin"]="0 0";if(A.options.useTransition){A.scroller.style[w+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(A.options.useTransform){A.scroller.style[w+"Transform"]=a+A.x+"px,"+A.y+"px"+k}else{A.scroller.style.cssText+=";position:absolute;top:"+A.y+"px;left:"+A.x+"px"}if(A.options.useTransition){A.options.fixedScrollbar=true}A.refresh();A._bind(h,window);A._bind(b);if(!v){A._bind("mouseout",A.wrapper);if(A.options.wheelAction!="none"){A._bind(r)}}if(A.options.checkDOMChanges){A.checkDOMTime=setInterval(function(){A._checkDOMChanges()},500)}};t.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(y){var m=this;switch(y.type){case b:if(!v&&y.button!==0){return}m._start(y);break;case q:m._move(y);break;case e:case u:m._end(y);break;case h:m._resize();break;case r:m._wheel(y);break;case"mouseout":m._mouseout(y);break;case"webkitTransitionEnd":m._transitionEnd(y);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var z=this,A=document,y;if(!z[m+"Scrollbar"]){if(z[m+"ScrollbarWrapper"]){if(f){z[m+"ScrollbarIndicator"].style[w+"Transform"]=""}z[m+"ScrollbarWrapper"].parentNode.removeChild(z[m+"ScrollbarWrapper"]);z[m+"ScrollbarWrapper"]=null;z[m+"ScrollbarIndicator"]=null}return}if(!z[m+"ScrollbarWrapper"]){y=A.createElement("div");if(z.options.scrollbarClass){y.className=z.options.scrollbarClass+m.toUpperCase()}else{y.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(z.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(z.hScrollbar?"7":"2")+"px;top:2px;right:1px")}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:opacity;-"+w+"-transition-duration:"+(z.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(z.options.hideScrollbar?"0":"1");z.wrapper.appendChild(y);z[m+"ScrollbarWrapper"]=y;y=A.createElement("div");if(!z.options.scrollbarClass){y.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+w+"-background-clip:padding-box;-"+w+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+w+"-border-radius:3px;border-radius:3px"}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:-"+w+"-transform;-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+w+"-transition-duration:0;-"+w+"-transform:"+a+"0,0"+k;if(z.options.useTransition){y.style.cssText+=";-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}z[m+"ScrollbarWrapper"].appendChild(y);z[m+"ScrollbarIndicator"]=y}if(m=="h"){z.hScrollbarSize=z.hScrollbarWrapper.clientWidth;z.hScrollbarIndicatorSize=s.max(d(z.hScrollbarSize*z.hScrollbarSize/z.scrollerW),8);z.hScrollbarIndicator.style.width=z.hScrollbarIndicatorSize+"px";z.hScrollbarMaxScroll=z.hScrollbarSize-z.hScrollbarIndicatorSize;z.hScrollbarProp=z.hScrollbarMaxScroll/z.maxScrollX}else{z.vScrollbarSize=z.vScrollbarWrapper.clientHeight;z.vScrollbarIndicatorSize=s.max(d(z.vScrollbarSize*z.vScrollbarSize/z.scrollerH),8);z.vScrollbarIndicator.style.height=z.vScrollbarIndicatorSize+"px";z.vScrollbarMaxScroll=z.vScrollbarSize-z.vScrollbarIndicatorSize;z.vScrollbarProp=z.vScrollbarMaxScroll/z.maxScrollY}z._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},x?200:0)},_pos:function(m,z){m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[w+"Transform"]=a+m+"px,"+z+"px"+k+" scale("+this.scale+")"}else{m=d(m);z=d(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px"}this.x=m;this.y=z;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,A){var z=this,B=m=="h"?z.x:z.y,y;if(!z[m+"Scrollbar"]){return}B=z[m+"ScrollbarProp"]*B;if(B<0){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]+d(B*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px"}B=0}else{if(B>z[m+"ScrollbarMaxScroll"]){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]-d((B-z[m+"ScrollbarMaxScroll"])*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px";B=z[m+"ScrollbarMaxScroll"]+(z[m+"ScrollbarIndicatorSize"]-y)}else{B=z[m+"ScrollbarMaxScroll"]}}}z[m+"ScrollbarWrapper"].style[w+"TransitionDelay"]="0";z[m+"ScrollbarWrapper"].style.opacity=A&&z.options.hideScrollbar?"0":"1";z[m+"ScrollbarIndicator"].style[w+"Transform"]=a+(m=="h"?B+"px,0":"0,"+B+"px")+k},_start:function(E){var D=this,z=v?E.touches[0]:E,A,m,F,C,B;if(!D.enabled){return}if(D.options.onBeforeScrollStart){D.options.onBeforeScrollStart.call(D,E)}if(D.options.useTransition||D.options.zoom){D._transitionTime(0)}D.moved=false;D.animating=false;D.zoomed=false;D.distX=0;D.distY=0;D.absDistX=0;D.absDistY=0;D.dirX=0;D.dirY=0;if(D.options.zoom&&v&&E.touches.length>1){C=s.abs(E.touches[0].pageX-E.touches[1].pageX);B=s.abs(E.touches[0].pageY-E.touches[1].pageY);D.touchesDistStart=s.sqrt(C*C+B*B);D.originX=s.abs(E.touches[0].pageX+E.touches[1].pageX-D.wrapperOffsetLeft*2)/2-D.x;D.originY=s.abs(E.touches[0].pageY+E.touches[1].pageY-D.wrapperOffsetTop*2)/2-D.y;if(D.options.onZoomStart){D.options.onZoomStart.call(D,E)}}if(D.options.momentum){if(D.options.useTransform){A=getComputedStyle(D.scroller,null)[w+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=A[4]*1;F=A[5]*1}else{m=getComputedStyle(D.scroller,null).left.replace(/[^0-9-]/g,"")*1;F=getComputedStyle(D.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=D.x||F!=D.y){if(D.options.useTransition){D._unbind("webkitTransitionEnd")}else{n(D.aniTime)}D.steps=[];D._pos(m,F)}}D.absStartX=D.x;D.absStartY=D.y;D.startX=D.x;D.startY=D.y;D.pointX=z.pageX;D.pointY=z.pageY;D.startTime=E.timeStamp||Date.now();if(D.options.onScrollStart){D.options.onScrollStart.call(D,E)}D._bind(q);D._bind(e);D._bind(u)},_move:function(F){var D=this,G=v?F.touches[0]:F,B=G.pageX-D.pointX,z=G.pageY-D.pointY,m=D.x+B,H=D.y+z,C,A,y,E=F.timeStamp||Date.now();if(D.options.onBeforeScrollMove){D.options.onBeforeScrollMove.call(D,F)}if(D.options.zoom&&v&&F.touches.length>1){C=s.abs(F.touches[0].pageX-F.touches[1].pageX);A=s.abs(F.touches[0].pageY-F.touches[1].pageY);D.touchesDist=s.sqrt(C*C+A*A);D.zoomed=true;y=1/D.touchesDistStart*D.touchesDist*this.scale;if(y<D.options.zoomMin){y=0.5*D.options.zoomMin*Math.pow(2,y/D.options.zoomMin)}else{if(y>D.options.zoomMax){y=2*D.options.zoomMax*Math.pow(0.5,D.options.zoomMax/y)}}D.lastScale=y/this.scale;m=this.originX-this.originX*D.lastScale+this.x,H=this.originY-this.originY*D.lastScale+this.y;this.scroller.style[w+"Transform"]=a+m+"px,"+H+"px"+k+" scale("+y+")";if(D.options.onZoom){D.options.onZoom.call(D,F)}return}D.pointX=G.pageX;D.pointY=G.pageY;if(m>0||m<D.maxScrollX){m=D.options.bounce?D.x+(B/2):m>=0||D.maxScrollX>=0?0:D.maxScrollX}if(H>D.minScrollY||H<D.maxScrollY){H=D.options.bounce?D.y+(z/2):H>=D.minScrollY||D.maxScrollY>=0?D.minScrollY:D.maxScrollY}D.distX+=B;D.distY+=z;D.absDistX=s.abs(D.distX);D.absDistY=s.abs(D.distY);if(D.absDistX<6&&D.absDistY<6){return}if(D.options.lockDirection){if(D.absDistX>D.absDistY+5){H=D.y;z=0}else{if(D.absDistY>D.absDistX+5){m=D.x;B=0}}}D.moved=true;D._pos(m,H);D.dirX=B>0?-1:B<0?1:0;D.dirY=z>0?-1:z<0?1:0;if(E-D.startTime>300){D.startTime=E;D.startX=D.x;D.startY=D.y}if(D.options.onScrollMove){D.options.onScrollMove.call(D,F)}},_end:function(F){if(v&&F.touches.length!=0){return}var D=this,L=v?F.changedTouches[0]:F,G,K,z={dist:0,time:0},m={dist:0,time:0},C=(F.timeStamp||Date.now())-D.startTime,H=D.x,E=D.y,J,I,y,B,A;D._unbind(q);D._unbind(e);D._unbind(u);if(D.options.onBeforeScrollEnd){D.options.onBeforeScrollEnd.call(D,F)}if(D.zoomed){A=D.scale*D.lastScale;A=Math.max(D.options.zoomMin,A);A=Math.min(D.options.zoomMax,A);D.lastScale=A/D.scale;D.scale=A;D.x=D.originX-D.originX*D.lastScale+D.x;D.y=D.originY-D.originY*D.lastScale+D.y;D.scroller.style[w+"TransitionDuration"]="200ms";D.scroller.style[w+"Transform"]=a+D.x+"px,"+D.y+"px"+k+" scale("+D.scale+")";D.zoomed=false;D.refresh();if(D.options.onZoomEnd){D.options.onZoomEnd.call(D,F)}return}if(!D.moved){if(v){if(D.doubleTapTimer&&D.options.zoom){clearTimeout(D.doubleTapTimer);D.doubleTapTimer=null;if(D.options.onZoomStart){D.options.onZoomStart.call(D,F)}D.zoom(D.pointX,D.pointY,D.scale==1?D.options.doubleTapZoom:1);if(D.options.onZoomEnd){setTimeout(function(){D.options.onZoomEnd.call(D,F)},200)}}else{D.doubleTapTimer=setTimeout(function(){D.doubleTapTimer=null;G=L.target;while(G.nodeType!=1){G=G.parentNode}if(G.tagName!="SELECT"&&G.tagName!="INPUT"&&G.tagName!="TEXTAREA"){K=document.createEvent("MouseEvents");K.initMouseEvent("click",true,true,F.view,1,L.screenX,L.screenY,L.clientX,L.clientY,F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,0,null);K._fake=true;G.dispatchEvent(K)}},D.options.zoom?250:0)}}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(C<300&&D.options.momentum){z=H?D._momentum(H-D.startX,C,-D.x,D.scrollerW-D.wrapperW+D.x,D.options.bounce?D.wrapperW:0):z;m=E?D._momentum(E-D.startY,C,-D.y,(D.maxScrollY<0?D.scrollerH-D.wrapperH+D.y-D.minScrollY:0),D.options.bounce?D.wrapperH:0):m;H=D.x+z.dist;E=D.y+m.dist;if((D.x>0&&H>0)||(D.x<D.maxScrollX&&H<D.maxScrollX)){z={dist:0,time:0}}if((D.y>D.minScrollY&&E>D.minScrollY)||(D.y<D.maxScrollY&&E<D.maxScrollY)){m={dist:0,time:0}}}if(z.dist||m.dist){y=s.max(s.max(z.time,m.time),10);if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(H,E);H=B.x;E=B.y;y=s.max(B.time,y)}}D.scrollTo(d(H),d(E),y);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(D.x,D.y);if(B.x!=D.x||B.y!=D.y){D.scrollTo(B.x,B.y,B.time)}}if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}},_resetPos:function(z){var m=this,A=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,y=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(A==m.x&&y==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.hScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.vScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(A,y,z||0)},_wheel:function(C){var A=this,B,z,y,m,D;if("wheelDeltaX" in C){B=C.wheelDeltaX/12;z=C.wheelDeltaY/12}else{if("wheelDelta" in C){B=z=C.wheelDelta/12}else{if("detail" in C){B=z=-C.detail*3}else{return}}}if(A.options.wheelAction=="zoom"){D=A.scale*Math.pow(2,1/3*(z?z/Math.abs(z):0));if(D<A.options.zoomMin){D=A.options.zoomMin}if(D>A.options.zoomMax){D=A.options.zoomMax}if(D!=A.scale){if(!A.wheelZoomCount&&A.options.onZoomStart){A.options.onZoomStart.call(A,C)}A.wheelZoomCount++;A.zoom(C.pageX,C.pageY,D,400);setTimeout(function(){A.wheelZoomCount--;if(!A.wheelZoomCount&&A.options.onZoomEnd){A.options.onZoomEnd.call(A,C)}},400)}return}y=A.x+B;m=A.y+z;if(y>0){y=0}else{if(y<A.maxScrollX){y=A.maxScrollX}}if(m>A.minScrollY){m=A.minScrollY}else{if(m<A.maxScrollY){m=A.maxScrollY}}A.scrollTo(y,m,0)},_mouseout:function(y){var m=y.relatedTarget;if(!m){this._end(y);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(y)},_transitionEnd:function(y){var m=this;if(y.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var D=this,y=D.x,m=D.y,B=Date.now(),C,A,z;if(D.animating){return}if(!D.steps.length){D._resetPos(400);return}C=D.steps.shift();if(C.x==y&&C.y==m){C.time=0}D.animating=true;D.moved=true;if(D.options.useTransition){D._transitionTime(C.time);D._pos(C.x,C.y);D.animating=false;if(C.time){D._bind("webkitTransitionEnd")}else{D._resetPos(0)}return}z=function(){var E=Date.now(),G,F;if(E>=B+C.time){D._pos(C.x,C.y);D.animating=false;if(D.options.onAnimationEnd){D.options.onAnimationEnd.call(D)}D._startAni();return}E=(E-B)/C.time-1;A=s.sqrt(1-E*E);G=(C.x-y)*A+y;F=(C.y-m)*A+m;D._pos(G,F);if(D.animating){D.aniTime=p(z)}};z()},_transitionTime:function(m){m+="ms";this.scroller.style[w+"TransitionDuration"]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[w+"TransitionDuration"]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[w+"TransitionDuration"]=m}},_momentum:function(E,y,C,m,G){var D=0.0006,z=s.abs(E)/y,A=(z*z)/(2*D),F=0,B=0;if(E>0&&A>C){B=G/(6/(A/z*D));C=C+B;z=z*C/A;A=C}else{if(E<0&&A>m){B=G/(6/(A/z*D));m=m+B;z=z*m/A;A=m}}A=A*(E<0?-1:1);F=z/D;return{dist:A,time:d(F)}},_offset:function(m){var z=-m.offsetLeft,y=-m.offsetTop;while(m=m.offsetParent){z-=m.offsetLeft;y-=m.offsetTop}if(m!=this.wrapper){z*=this.scale;y*=this.scale}return{left:z,top:y}},_snap:function(G,F){var D=this,C,B,E,A,z,m;E=D.pagesX.length-1;for(C=0,B=D.pagesX.length;C<B;C++){if(G>=D.pagesX[C]){E=C;break}}if(E==D.currPageX&&E>0&&D.dirX<0){E--}G=D.pagesX[E];z=s.abs(G-D.pagesX[D.currPageX]);z=z?s.abs(D.x-G)/z*500:0;D.currPageX=E;E=D.pagesY.length-1;for(C=0;C<E;C++){if(F>=D.pagesY[C]){E=C;break}}if(E==D.currPageY&&E>0&&D.dirY<0){E--}F=D.pagesY[E];m=s.abs(F-D.pagesY[D.currPageY]);m=m?s.abs(D.y-F)/m*500:0;D.currPageY=E;A=d(s.max(z,m))||200;return{x:G,y:F,time:A}},_bind:function(z,y,m){(y||this.scroller).addEventListener(z,this,!!m)},_unbind:function(z,y,m){(y||this.scroller).removeEventListener(z,this,!!m)},destroy:function(){var m=this;m.scroller.style[w+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,window);m._unbind(b);m._unbind(q);m._unbind(e);m._unbind(u);if(!m.options.hasTouch){m._unbind("mouseout",m.wrapper);m._unbind(r)}if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var A=this,C,z,m,y,D=0,B=0;if(A.scale<A.options.zoomMin){A.scale=A.options.zoomMin}A.wrapperW=A.wrapper.clientWidth||1;A.wrapperH=A.wrapper.clientHeight||1;A.minScrollY=-A.options.topOffset||0;A.scrollerW=d(A.scroller.offsetWidth*A.scale);A.scrollerH=d((A.scroller.offsetHeight+A.minScrollY)*A.scale);A.maxScrollX=A.wrapperW-A.scrollerW;A.maxScrollY=A.wrapperH-A.scrollerH+A.minScrollY;A.dirX=0;A.dirY=0;if(A.options.onRefresh){A.options.onRefresh.call(A)}A.hScroll=A.options.hScroll&&A.maxScrollX<0;A.vScroll=A.options.vScroll&&(!A.options.bounceLock&&!A.hScroll||A.scrollerH>A.wrapperH);A.hScrollbar=A.hScroll&&A.options.hScrollbar;A.vScrollbar=A.vScroll&&A.options.vScrollbar&&A.scrollerH>A.wrapperH;C=A._offset(A.wrapper);A.wrapperOffsetLeft=-C.left;A.wrapperOffsetTop=-C.top;if(typeof A.options.snap=="string"){A.pagesX=[];A.pagesY=[];y=A.scroller.querySelectorAll(A.options.snap);for(z=0,m=y.length;z<m;z++){D=A._offset(y[z]);D.left+=A.wrapperOffsetLeft;D.top+=A.wrapperOffsetTop;A.pagesX[z]=D.left<A.maxScrollX?A.maxScrollX:D.left*A.scale;A.pagesY[z]=D.top<A.maxScrollY?A.maxScrollY:D.top*A.scale}}else{if(A.options.snap){A.pagesX=[];while(D>=A.maxScrollX){A.pagesX[B]=D;D=D-A.wrapperW;B++}if(A.maxScrollX%A.wrapperW){A.pagesX[A.pagesX.length]=A.maxScrollX-A.pagesX[A.pagesX.length-1]+A.pagesX[A.pagesX.length-1]}D=0;B=0;A.pagesY=[];while(D>=A.maxScrollY){A.pagesY[B]=D;D=D-A.wrapperH;B++}if(A.maxScrollY%A.wrapperH){A.pagesY[A.pagesY.length]=A.maxScrollY-A.pagesY[A.pagesY.length-1]+A.pagesY[A.pagesY.length-1]}}}A._scrollbar("h");A._scrollbar("v");if(!A.zoomed){A.scroller.style[w+"TransitionDuration"]="0";A._resetPos(200)}},scrollTo:function(m,F,E,D){var C=this,B=m,A,z;C.stop();if(!B.length){B=[{x:m,y:F,time:E,relative:D}]}for(A=0,z=B.length;A<z;A++){if(B[A].relative){B[A].x=C.x-B[A].x;B[A].y=C.y-B[A].y}C.steps.push({x:B[A].x,y:B[A].y,time:B[A].time||0})}C._startAni()},scrollToElement:function(m,z){var y=this,A;m=m.nodeType?m:y.scroller.querySelector(m);if(!m){return}A=y._offset(m);A.left+=y.wrapperOffsetLeft;A.top+=y.wrapperOffsetTop;A.left=A.left>0?0:A.left<y.maxScrollX?y.maxScrollX:A.left;A.top=A.top>y.minScrollY?y.minScrollY:A.top<y.maxScrollY?y.maxScrollY:A.top;z=z===undefined?s.max(s.abs(A.left)*2,s.abs(A.top)*2):z;y.scrollTo(A.left,A.top,z)},scrollToPage:function(A,z,C){var B=this,m,D;C=C===undefined?400:C;if(B.options.onScrollStart){B.options.onScrollStart.call(B)}if(B.options.snap){A=A=="next"?B.currPageX+1:A=="prev"?B.currPageX-1:A;z=z=="next"?B.currPageY+1:z=="prev"?B.currPageY-1:z;A=A<0?0:A>B.pagesX.length-1?B.pagesX.length-1:A;z=z<0?0:z>B.pagesY.length-1?B.pagesY.length-1:z;B.currPageX=A;B.currPageY=z;m=B.pagesX[A];D=B.pagesY[z]}else{m=-B.wrapperW*A;D=-B.wrapperH*z;if(m<B.maxScrollX){m=B.maxScrollX}if(D<B.maxScrollY){D=B.maxScrollY}}B.scrollTo(m,D,C)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(q);this._unbind(e);this._unbind(u)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd")}else{n(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,D,C,B){var z=this,A=C/z.scale;if(!z.options.useTransform){return}z.zoomed=true;B=B===undefined?200:B;m=m-z.wrapperOffsetLeft-z.x;D=D-z.wrapperOffsetTop-z.y;z.x=m-m*A+z.x;z.y=D-D*A+z.y;z.scale=C;z.refresh();z.x=z.x>0?0:z.x<z.maxScrollX?z.maxScrollX:z.x;z.y=z.y>z.minScrollY?z.minScrollY:z.y<z.maxScrollY?z.maxScrollY:z.y;z.scroller.style[w+"TransitionDuration"]=B+"ms";z.scroller.style[w+"Transform"]=a+z.x+"px,"+z.y+"px"+k+" scale("+C+")";z.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined"){exports.iScroll=t}else{window.iScroll=t}})();var pline,oo;oo=pline=(function(e){var r={templateEngine:"mustache",viewportSelector:"body",pushState:false,scroll:"iscroll"};return{_ajaxRequestObject:null,Class:function v(){return my.Class.apply(this,arguments)},log:function d(D){if(e.console&&e.console.log){var E=("string"!==typeof D&&"toString" in D)?D.toString():D;console.log(D.toStirng())}},warn:function z(D){var E=("string"!==typeof D&&"toString" in D)?D.toString():D;if(e.console&&e.console.warn){console.warn(E)}else{oo.log("/!\\ Warning : "+E)}},getNS:function k(G,H){var I=G.split(".");var F=e;for(var E=0,D=I.length;E<D;E++){if("object"!=typeof(F[I[E]])){F[I[E]]={}}F=F[I[E]]}return F},createDelegate:function f(E,D){return function(){return E.apply(D,arguments)}},emptyFn:function o(){},generateId:function x(E){var D=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return["id-",D()+D()+"-"+D()+"-"+D()+"-"+D()+"-"+D()+D()+D()].join("")},override:function g(E,D){var F=Object.getOwnPropertyNames(D);F.forEach(function(G){var H=Object.getOwnPropertyDescriptor(D,G);Object.defineProperty(E,G,H)});return E},createControllerClass:function q(E,F){if(1===arguments.length){F=E;E=null}if(!F&&("object"!==typeof F)){throw new Error("Wrong parameter")}var D=F.constructor=function(){D.Super.call(this)};var G=oo.Class(oo.router.Controller,F);if(E){this.getRouter().addController(E,G)}return G},createController:function n(){return this.createControllerClass.apply(this,arguments)},getRouter:function C(){return oo.router.router||(oo.router.router=new oo.router.Router())},initViewport:function s(E){var F=this.getNS("oo.view"),D=F.viewport=new F.Viewport(E);return D},getViewport:function w(){var D=this.getNS("oo.view");if(D.viewport){return D.viewport}else{return this.initViewport()}},createPanelClass:function B(E,H){if(!(typeof E=="object"&&"id" in E)){throw"Wrong parameter"}var G=E.id;delete E.id;var D=E.constructor=function(){D.Super.call(this)};var F=oo.Class(oo.view.Panel,E);if(H!==false){H||(H={});oo.getViewport().register(G,F,H.stage||null,H.pos||null)}return F},createPanel:function A(D,E){console.warn("This method is deprecated, use oo.createPanelClass() instead");return this.createPanelClass.apply(this,arguments)},createModel:function l(E){var D=new oo.data.Model(E);oo.data.Model.register(D);return D},getModel:function m(D){return oo.data.Model.get(D)},createElement:function p(E,D){return new (oo.view.Element.get(E))(D||null)},define:function b(D){this.override(r,D)},getConfig:function y(D){if(D&&D in r){return r[D]}else{return r}},bootstrap:function a(D){if(typeof D!=="function"){throw"parameter must be a function"}var F=this;function E(){e.scroll(0,0);document.addEventListener("touchmove",function(G){G.preventDefault()},false);D.call(e,F)}if("PhoneGap" in e&&PhoneGap.available){document.addEventListener("deviceready",E)}else{e.addEventListener("load",E)}},dom:function u(D){if(!D){return oo.view.Dom}else{return new oo.view.Dom(D.toString())}},ajax:function j(F,I,H,D,E){if(0===arguments.length){return{post:function(L,M,J,K){oo.ajax(L,"post",M,J,K)},get:function(L,M,J,K){oo.ajax(L,"get",M,J,K)}}}if(null===this._ajaxRequestObject){this._ajaxRequestObject=new oo.core.net.Ajax()}var G=this._ajaxRequestObject.buildReq(F,I,H,D,E);G.send()},_convertNodeListToArray:function c(D){return Array.prototype.slice.call(D,0)},serialize:function t(D){var E=[];for(var F in D){E.push(F+"="+encodeURI((typeof D[F]=="object"?D[F].toString():D[F])))}return E.join("&")},isArray:function h(E){var D=Array.isArray;if(D){return D(E)}else{return E.prototype.toString()==="[object Array]"}}}})(window);(function(a){var b=a.getNS("oo.core.mixins").Events=a.Class({_getListenersArray:function c(){if(!this._eventListeners){this._eventListeners={}}return this._eventListeners},addListener:function d(h,j){if("function"!==typeof j){throw"listener must be a function"}var g=this._getListenersArray();if(!g[h]){g[h]=[]}g[h].push(j)},removeListener:function e(h,k){if("function"!==typeof k){throw"listener must be a function"}var g=this._getListenersArray();if(g[h]){var j=g[h].indexOf(k);if(-1!=j){g[h].splice(j,1)}}},triggerEvent:function f(j,n){var h=this._getListenersArray();if(h[j]){for(var k=0,g=h[j].length;k<g;k++){var m=h[j][k];m.apply(this,n)}}}})})(oo||{});(function(a){var c=this;var e=a.getNS("oo.core.mixins").Scroll=a.Class({isScrollable:false,_createScroll:function d(f){if(null===this.scroll){if(undefined===f){f={}}if(!f.hasOwnProperty("el")){f.el=this}return new (a.view.scroll.Scroll.get(a.getConfig("scroll")))(f)}},setScrollable:function b(f){this.scroll=null;this.scroll=this._createScroll(f);var g=this;this.addListener(a.view.Element.REFRESH_CONTENT,function(){g.scroll.refresh()});this.isScrollable=true}})})(oo||{});(function(a){var h="ontouchstart" in window?true:false;var g=function g(k,j){var l=null;if(e.HAS_TOUCH){j=j||0;l=k.touches[j];if(undefined===l){l=k.changedTouches[j]}}else{l=k}return[parseInt(l.pageX,10),parseInt(l.pageY,10)]};var e=a.Class({STATIC:{getPosition:g,getPositionX:function d(k,j){return g(k,j)[0]},getPositionY:function c(k,j){return g(k,j)[1]},getTarget:function f(k,j){return k.touches[j||0].target},HAS_TOUCH:"ontouchstart" in window?true:false}});(function(){var l={el:null,startTime:null,stopTime:null,hasMoved:false,startX:null,startY:null,lastX:null,lastY:null,time:150,timeout:null,doubleTap:false};var k=function k(o){l.el=o.target;l.startTime=Date.now();l.hasMoved=false;l.startX=e.getPositionX(o);l.startY=e.getPositionY(o);if((l.startTime-l.stopTime)<l.time){l.doubleTap=true;window.clearTimeout(l.timeout)}else{l.doubleTap=false}};var m=function m(o){if(l.startTime){l.lastX=e.getPositionX(o);l.lastY=e.getPositionY(o);l.hasMoved=true}};var n=function n(q){l.stopTime=Date.now();if(l.hasMoved){var p=l.lastX-l.startX,o=l.lastY-l.startY;if(Math.abs(p)>30&&Math.abs(o)<100){if(p<0){j(l.el,"swipeLeft",true,true)}else{j(l.el,"swipeRight",true,true)}}}else{l.timeout=window.setTimeout(function(){l.timeout=null;if(l.doubleTap){j(l.el,"doubleTap",true,true)}else{j(l.el,"tap",true,true)}},l.time)}l.lastX=l.lastY=l.startX=l.startY=null};var j=function j(s,r,q,p){var o=document.createEvent("Events");o.initEvent(r,q,p);s.dispatchEvent(o)};if(!e.HAS_TOUCH){e.EVENT_START="mousedown";e.EVENT_MOVE="mousemove";e.EVENT_END="mouseup"}else{e.EVENT_START="touchstart";e.EVENT_MOVE="touchmove";e.EVENT_END="touchend"}document.addEventListener(e.EVENT_START,function(o){k(o)},false);document.addEventListener(e.EVENT_MOVE,function(o){o.preventDefault();m(o)},false);document.addEventListener(e.EVENT_END,function(o){n(o)},false)})();var b=a.getNS("oo.core");b.Touch=e})(oo||{});(function(a){var g=this;var e=a.getNS("oo.core.net").Ajax=a.Class({buildReq:function d(j,h,o,k,p){var q=this._getRequest();h=h.toUpperCase();q.addEventListener("readystatechange",function(r){if(r.target.readyState==4){if(r.target.status==200){var s=JSON.parse(r.target.responseText);k.call(g,s)}else{p.call(g)}}});var m=this._processParams(o),l=j;if(h=="GET"&&""!==m){if(l.indexOf("?")===-1){l+=("?"+m)}else{l+=("&"+m)}}q.open(h,l);if("POST"==h){this._setPostHeaders(q)}return{send:function n(){if("POST"===h){q.send(m)}else{q.send()}}}},_getRequest:function f(){return new XMLHttpRequest()},_processParams:function b(h){return a.serialize(h)},_setPostHeaders:function c(h){h.setRequestHeader("X-Requested-With","XMLHttpRequest");h.setRequestHeader("Content-type","application/x-www-form-urlencoded")}})})(oo);(function(a){var f=a.getNS("oo.router").Controller=a.Class({_controllers:{},_viewport:null,_Viewport:null,constructor:function c(){this._viewport=a.getViewport();this._Viewport=a.view.Viewport},getViewport:function d(){console.warn("the getViewport method of the class Controller is deprecated !");return a.getViewport()},getPanel:function e(g){return this._viewport.getPanel(g)},panelIsEnabled:function b(g){return this._viewport.panelIsEnable(g)}})})(oo||{});(function(g){var s=g.getNS("oo.router").Router=g.Class({STATIC:{POPSTATE:"popstate"},constructor:function q(){this._routes={};this._registeredControllers={};this._controllers={};this._baseUrl="";var u=this},_usePushState:function f(){return g.getConfig("pushState")},addRoutes:function j(u){if(!u||(Object.prototype.toString.call(u)!=="[object Object]")){throw new Error("Routes must exist and must be an object literal")}for(var v in u){this.addRoute(v,u[v])}return this},addRoute:function r(u,v){if(!u||!v.hasOwnProperty("url")||!v.hasOwnProperty("controller")||!v.hasOwnProperty("action")){throw new Error('A route must have a name and properties "url", "controller" and "action"')}if(!this.isValidUrl(v.url)){throw new Error('The url property must begun by "/"')}var w={};w[u]=v;this._routes=g.override(this._routes,w);delete w[u]},isValidUrl:function e(u){return("/"===u.slice(0,1))},addController:function n(v,u){if(!v||("string"!==typeof v)){throw new Error('Wrong "name" parameter : Must exist and be a string')}if("function"!==typeof u){throw new Error('Wrong "cls" parameter : Must be a function')}var w={};w[v]=u;this._controllers=g.override(this._controllers,w)},addControllers:function c(u){if(!u||(Object.prototype.toString.call(u)!=="[object Object]")){throw new Error("Wrong parameter : must exist and be an object")}for(var v in u){this.addController(v,u[v])}},init:function o(){var v=this,w=window.location;this._extractBaseUrl();var u=function(){var x;if(v._usePushState()){propName="pathname"}else{propName="hash"}return function(y){v.dispatch(w[propName])}};if(this._usePushState()&&window.history&&window.history.pushState){this.hasHistory=true;window.addEventListener("popstate",u(s.POPSTATE),false)}else{window.addEventListener("hashchange",u(),false);(u())()}},load:function d(v){var u=this._addBaseUrl(v);if(!this._usePushState()||!this.hasHistory){window.location.hash=u}else{history.pushState({},"",u);this.dispatch(u)}},_cleanUrl:function p(u){var v=this._getBaseUrl();if(this._usePushState()){return 0===u.indexOf(v)?u.substring(v.length):u}else{return u.slice(1)}},_addBaseUrl:function m(u){return this._getBaseUrl()+(u.substring(0,1)==="/"?"":"/")+u},_getBaseUrl:function k(){return this._baseUrl},_extractBaseUrl:function h(){this._baseUrl="";if(this._usePushState()){var u=window.location.pathname;this._baseUrl=u.substring(-1,1)!=="/"?u:u.substring(0,u.length-1)}},dispatch:function t(x){x=this._cleanUrl(x);this.parseRoute(x);if(this.requestParams){var w=[this.requestParams.controller.charAt(0).toUpperCase(),this.requestParams.controller.substring(1),"Controller"].join("");var u=[this.requestParams.action,"Action"].join("");var v;if((typeof this._registeredControllers[w]!=="function")&&("undefined"!==typeof this._controllers[w])){if("undefined"===typeof this._registeredControllers[w]){this._registeredControllers[w]=new this._controllers[w]()}v=this._registeredControllers[w];if(typeof v[u]==="function"){v[u](this.requestParams.params)}}}},parseRoute:function a(v){var u=this._routes;var w=null;for(var y in u){var x=u[y];if(x.url==v.substring(0,x.url.length)){w={controller:x.controller,action:x.action};v=v.substring(x.url.length)}}if("/"==v.substring(0,1)){v=v.slice(1)}var z=v.split("/");if(!w){w={controller:z[0],action:z[1]};if(!w.controller){w.controller="index"}else{z.shift()}if(!w.action||w.action===undefined){w.action="index"}else{z.shift()}}w.params={};while(z.length){paramName=z.shift();if(paramName){paramValue=z.shift();if(paramValue!==undefined){w.params[paramName]=paramValue}}}this.requestParams=w;return w},url:function b(u,y){var v=this._routes[u];if(!v){throw Error("route name doesn't exists")}var w="";for(var x in y){w=[w,"/",x,"/",y[x]].join("")}return[v.url,w].join("")},back:function l(){history.back()}})})(oo||{});var oo=(function(a){var e=this;var f=a.getNS("oo.data");var d={};f.Provider=a.Class({STATIC:{register:function c(g,h){if(d[h]){throw"Already existing codename"}d[h]=g},get:function b(g){if(g in d){return d[g]}else{throw"Invalid codename for a provider"}},unregister:function c(g){delete d[g]}},_name:"",_data:{},constructor:function(g){if(g&&"name" in g&&typeof g.name=="string"){this._name=g.name}else{throw"Config object must contain a name property"}},save:function(g,h){throw"Can't be called directly from Provider class"},fetch:function(g){throw"Can't be called directly from Provider class"},get:function(g){throw"Can't be called directly from Provider class"},clearAll:function(g){throw"Can't be called directly from Provider class"},remove:function(g,h){throw"Can't be called directly from Provider class"}});return a})(oo||{});(function(g){var b=this;var e=g.getNS("oo.data").MemoryProvider=g.Class(g.data.Provider,{_data:{},constructor:function f(k){e.Super.call(this,k);if(k.hasOwnProperty("data")){this.setData(k.data)}},save:function h(m,l){this.setData(m);var n={success:g.emptyFn};l=l||{};if(typeof l=="function"){l={success:l}}var k=g.override(n,l);l.success.call(b,m)},fetch:function a(l){var m={success:g.emptyFn};l=l||{};if(typeof l=="function"){l={success:l}}var k=g.override(m,l);k.success.call(b,this._data)},get:function c(k,l){l.call(b,this._data[k]||null)},setData:function j(l,k){if(!l){throw new Error("Data missing")}if(!(l instanceof Array)){l=[l]}if(k){this.clearAll()}this._data=l},clearAll:function d(){this._data={}}});g.data.Provider.register(e,"memory")})(oo||{});(function(h){var b=this;var c=h.getNS("oo.data").LocalProvider=h.Class(h.data.Provider,{_store:{},constructor:function g(k){c.Super.call(this,k);this._store=Lawnchair({name:this._name,record:"record"},function(){})},save:function j(m,l){if(!(m instanceof Array)){m=[m]}var n={success:h.emptyFn};if(typeof l=="function"){l={success:l}}var k=h.override(n,l);this._store.batch(m);k.success.call(b,m)},fetch:function a(l){var m={success:h.emptyFn};if(typeof l=="function"){l={success:l}}var k=h.override(m,l);this._store.all(function(n){k.success.call(b,n)})},get:function d(k,l){this._store.get(k,l)},remove:function e(l,p){if(!h.isArray(l)){l=[l]}var n=this,m=0,o=l.length,k=function(){m++;if(m==o){p()}};l.forEach(function(q){n._store.remove(q,k)})},clearAll:function f(){this._store.nuke()}});h.data.Provider.register(c,"local")})(oo||{});(function(g){var b=this;var m=g.getNS("oo.data").AjaxProvider=g.Class(g.data.Provider,{_cacheProvider:null,_cacheCleared:true,_cachedParameterString:[],_url:null,_cachePrefix:"",_noCache:null,constructor:function e(n){var p={cacheProvider:"memory",noCache:false};var o=g.override(p,n);if(!o.url||typeof o.url!="string"){throw"'url' property must be set"}this._url=o.url;m.Super.call(this,{name:o.name});this._noCache=o.noCache;if(!this._noCache){this._cacheProvider=new (g.data.Provider.get(o.cacheProvider))({name:"yellowjs-cache__"+o.name});this._cachePrefix=this._url}},save:function h(p,o){var r="POST";var q={success:g.emptyFn,error:g.emptyFn};if(typeof o=="function"){o={success:o}}var n=g.override(q,o);g.ajax().post(this._url,p,g.createDelegate(function(){if(!this._noCache){this._clearCache()}n.success.call(b)},this),n.error)},fetch:function a(o,p){var s="GET";var q={success:g.emptyFn,error:g.emptyFn,params:{}};o=o||{};if(typeof o=="function"){o={success:o}}var n=g.override(q,o);var r=g.createDelegate(function(t){var u=g.serialize(n.params);if(!this._noCache){this._clearCache(u);this._saveCache(t,u,function(){n.success.call(b,t)})}else{n.success.call(b,t)}},this);if(p||this._noCache||!this._getCache(g.serialize(n.params),r)){g.ajax().get(this._url,n.params,r,n.error)}},get:function d(n,r){if(this._noCache){throw"This method is available only if cache is activated"}var o=this;var q=n||(this._cachedParameterString[this._cachedParameterString.length-1]);var p=q.substr(q.indexOf("|")+1);if(this._getCache(p,g.emptyFn)){o._cacheProvider.get(q,function(s){r.call(b,s.data)})}else{throw"please perform a fetch before"}},clearAll:function f(){if(this._noCache){throw"This method is available only if cache is activated"}this._clearCache()},_genCacheKey:function k(n){return this._cachePrefix+"|"+(n||"")},_clearCache:function l(n){if(this._noCache){throw"This method is available only if cache is activated"}if(!n){this._cacheProvider.clearAll();this._cachedParameterString=[]}else{this._cachedParameterString.slice(this._cachedParameterString.indexOf(this._genCacheKey(n)),1)}},_saveCache:function c(p,o,q){if(this._noCache){throw"This method is available only if cache is activated"}var n={};n.key=this._genCacheKey(o);n.data=p;this._cachedParameterString=[];if(-1===this._cachedParameterString.indexOf(n.key)){this._cachedParameterString.push(n.key)}this._cacheProvider.save(n,q)},_getCache:function j(n,o){if(this._noCache){throw"This method is available only if cache is activated"}if(-1!==this._cachedParameterString.indexOf(this._genCacheKey(n))){this._cacheProvider.fetch(function(p){o(p.data)});return true}else{return false}}});g.data.Provider.register(m,"ajax")})(oo||{});(function(g){var A=g.data.Provider,t=this;var n={};var h=g.getNS("oo.data").Model=g.Class(null,g.core.mixins.Events,{STATIC:{AFTER_COMMIT:"AFTER_COMMIT",AFTER_SAVE:"AFTER_COMMIT",AFTER_FETCH:"AFTER_FETCH",register:function b(E){if(!n.hasOwnProperty(E._name)){n[E._name]=E}else{throw"Model already exists in registry"}},unregister:function b(E){if(!n.hasOwnProperty(E)){throw"No model registred with the given id"}else{n[E]=null;delete n[E]}},get:function z(E){if(!n.hasOwnProperty(E)){throw"No model registred with the given id"}else{return n[E]}}},_data:null,_indexes:null,_toBeDeleted:null,constructor:function w(F){if(!F||(!F.hasOwnProperty("name")||!F.hasOwnProperty("provider"))){throw'Either property "name" or "provider" is missing in the options given to the Model constructor'}var G={indexes:["key"]};var E=g.override(G,F);this._data=[];this._indexes={};this._toBeDeleted=[];this.setModelName(E.name);this.setProvider(E.provider);this.setIndexes(E.indexes)},setProvider:function c(E){if(E instanceof A){this._provider=E}else{if(typeof E=="object"){var F=g.data.Provider.get(E.type);delete E.type;E.name=this._name;this._provider=new F(E)}}},getModelName:function x(){return this._name},setModelName:function y(E){if(!E||"string"!==typeof E){throw new Error("Missing name or name is not a string")}this._name=E},setIndexes:function f(E){E.forEach(function(F){this._indexes[F]={}},this);this._buildFullIndexes()},_resetIndexes:function u(){var E=Object.getOwnPropertyNames(this._indexes);this.setIndexes(E)},_buildIndex:function D(E){var F=Object.getOwnPropertyNames(this._indexes);F.forEach(function(G){if(E[G]){if(!this._indexes[G][E[G]]){this._indexes[G][E[G]]=[]}this._indexes[G][E[G]].push(E)}},this)},_removeFromIndex:function j(E){var F=Object.getOwnPropertyNames(this._indexes);F.forEach(function(G){if(E[G]){this._indexes[G][E[G]].splice(this._indexes[G][E[G]].indexOf(E),1);if(0===this._indexes[G][E[G]].length){this._indexes[G][E[G]]=null;delete this._indexes[G][E[G]]}}},this)},_createIndexes:function l(){return s()},_buildFullIndexes:function s(){this._data.forEach(function(E){this._buildIndex(E)},this)},fetch:function q(I,F){var H={success:g.emptyFn,params:{}};I=I||{};if(typeof I=="function"){I={success:I}}if(typeof I!="object"){throw"Model.fetch() : params must be a function or a config object"}I=g.override(H,I);var G=this,E=function E(J){if(J){if(!F){G.clearAll()}G.setData(J)}if(I.success){I.success.call(G)}G.triggerEvent(h.AFTER_FETCH,[G])};this._provider.fetch({success:E,params:I.params})},save:function v(E){this.commit(E)},commit:function e(F){var E=this;F=F||g.emptyFn;this._provider.save(this._data,function(){if(E._toBeDeleted.length){E._provider.remove(E._toBeDeleted,function(){E._toBeDeleted=[];E.triggerEvent(h.AFTER_COMMIT);F.call(E)})}})},getData:function k(){return this._data},setData:function d(E){E.forEach(this.set,this)},clearAll:function a(){this._data=[];this._resetIndexes()},filterBy:function C(G,H){if(undefined===G||undefined===H){throw new Error("Missing params index or key")}if("string"!==typeof G){throw new Error("Param index must be a string")}var F=this._indexes,E=[],I;if(F.hasOwnProperty(G)){I=F[G][H];if(undefined!==I){E=I}}else{this._data.forEach(function(J){if(J.hasOwnProperty(G)){if(J[G]==H){E.push(J)}}})}return E},getBy:function r(F,G){var E=this.filterBy(F,G);if(E.length){return E[0]}else{return null}},get:function z(E){if(undefined===E||"object"===typeof E){throw new Error("Missing key or key must't be an object")}return this.getBy("key",E)},set:function m(E){if(undefined===E||"object"!==typeof E){throw new Error("Parameter must exist and be an object")}var F=null;if(E.hasOwnProperty("key")){F=this.get(E.key)}if(null===F){this.add(E)}else{this._removeFromIndex(F);F=g.override(F,E);this._buildIndex(F)}},add:function o(E){if(!E.hasOwnProperty("key")){E.key=g.generateId()}else{if(null!==this.get(E.key)){throw"Trying to add a record with an already existing id"}}this._data.push(E);this._buildIndex(E)},removeBy:function p(E,F){var G=this.filterBy(E,F);G.forEach(function(H){this._removeFromIndex(H);this._data.splice(this._data.indexOf(H),1);this._toBeDeleted.push(H.key)},this)},remove:function B(E){return this.removeBy("key",E)}})})(oo||{});var oo=(function(b){var f=this;var g=b.getNS("oo.view.templateengine");var a={};var e=g.Template=b.Class({STATIC:{register:function d(h,j){if(a[j]){throw"Already existing codename"}a[j]=h},get:function c(h){if(h in a){return a[h]}else{throw"Invalid codename"}},unregister:function d(h){delete a[h]}},constructor:function(h){},render:function(j,h){throw"Can't be called directly from Template class"}});return b})(oo||{});var oo=(function(a){var c=this;var d=a.getNS("oo.view.templateengine");var b=d.TemplateEngineMustache=a.Class(a.view.templateengine.Template,{constructor:function(e){b.Super.call(this,e)},render:function(f,e){if(!e&&!f){throw new Error("datas, tpl and domElem must exist")}return Mustache.render(f,e)}});d.Template.register(b,"mustache");return a})(oo||{});var oo=(function(a){var b=this;var d=a.getNS("oo.view.templateengine");var c=d.TemplateEngineHandlebars=a.Class(a.view.templateengine.Template,{constructor:function(e){c.Super.call(this,e)},render:function(f,e){if(!e&&!f){throw new Error("datas, tpl and domElem must exist")}var g=Handlebars.compile(f);return g(e)}});d.Template.register(c,"handlebars");return a})(oo||{});(function(oo){var ClassList=oo.Class({constructor:function constructor(obj){this._dom=obj;this._list=(obj.getAttribute("class"))?obj.getAttribute("class").split(" "):[]},destroy:function destroy(){this._dom=null;this._list.splice(0);this._list=null},_updateClassList:function _updateClassList(){this._dom.setAttribute("class",this._list.join(" "))},removeClass:function removeClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}var updated=false;var that=this;this._list=this._getDomCls();clsName.forEach(function(element,index,array){var i=that._list.indexOf(element);if(-1!==i){that._list.splice(i,1);updated=true}});if(updated){this._updateClassList()}},addClass:function addClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}var that=this;this._list=this._getDomCls();clsName.forEach(function(cls){if(!that.hasClass(cls)){that._list.push(cls);that._updateClassList()}})},setClass:function setClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}this._list=clsName;this._updateClassList()},hasClass:function hasClass(clsName){var i=this._getDomCls().indexOf(clsName);if(-1===i){return false}else{return true}},getClasses:function getClasses(){return this._list},_getDomCls:function _getDomCls(){var cls=this._dom.getAttribute("class");return((cls)?cls.split(" "):[])}});var prop={readOnly:[],readWrite:["width","height","zIndex","display","top","right","bottom","left","opacity","webkitTransitionProperty","webkitTransitionTimingFunction","webkitTransitionDuration","webkitTransitionDelay"]};var accessors=(function(){var that=this;for(i=0,len=prop.readOnly.length;i<len;i++){eval(["that.get",prop.readOnly[i].charAt(0).toUpperCase(),prop.readOnly[i].slice(1)," = function (unit, noCache) { if (noCache || !this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')]) { this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')] = (unit ? window.getComputedStyle(this.getDomObject()).",prop.readOnly[i]," : (window.getComputedStyle(this.getDomObject()).",prop.readOnly[i],").replace(/s|ms|px|em|pt|%/, '')); this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')] = parseInt(this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')], 10) || this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')]; } return this._cached[['",prop.readOnly[i],"', (unit ? 'u' : '')].join('')]; };"].join(""))}for(i=0,len=prop.readWrite.length;i<len;i++){eval(["that.get",prop.readWrite[i].charAt(0).toUpperCase(),prop.readWrite[i].slice(1)," = function (unit, noCache) { if (noCache || !this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')]) { this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')] = (unit ? window.getComputedStyle(this.getDomObject()).",prop.readWrite[i]," : (window.getComputedStyle(this.getDomObject()).",prop.readWrite[i],").replace(/s|ms|px|em|pt|%/, '')); this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')] = parseInt(this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')], 10) || this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')]; } return this._cached[['",prop.readWrite[i],"', (unit ? 'u' : '')].join('')]; };"].join(""));eval(["that.set",prop.readWrite[i].charAt(0).toUpperCase(),prop.readWrite[i].slice(1)," = function (val, unit) { if (this._cached['",prop.readWrite[i],"'] || this._cached[['",prop.readWrite[i],"', 'u'].join('')]) { this._cached['",prop.readWrite[i],"'] = this._cached[['",prop.readWrite[i],"', 'u'].join('')] = null; } this.getDomObject().style.",prop.readWrite[i]," = [val, (undefined !== unit ? unit : '')].join(''); return this };"].join(""))}return function(fn,scope,params){return that[fn].apply(scope,params)}})();var Dom=oo.getNS("oo.view").Dom=oo.Class(oo.emptyFn,oo.core.mixins.Events,{STATIC:{CSSMATRIXPATTERN:/matrix\(1, 0, 0, 1, (-?[0-9.]+), (-?[0-9.]+)\)/,createElement:function createElement(tag){return new Dom(document.createElement(tag))}},constructor:function constructor(identifier){this._uuid=oo.generateId();this._dom=null;this._cached={};this._template=null;this._cacheTpl=null;if(typeof identifier=="string"){this._identifier=identifier}else{if(identifier instanceof Object){this.setDomObject(identifier)}else{throw"Fatal Error : No identifier !"}}this._generateAccessor()},destroy:function destroy(){this.classList.destroy();this.classList=null;this._cached.splice(0);this._cached=null;this._dom.removeEventListeners();document.removeElement(this._dom);this._dom=null},_generateAccessor:function generateAccessor(){var p=this,i,len,fnName;for(i=0,len=prop.readOnly.length;i<len;i++){fnName="get"+prop.readOnly[i].charAt(0).toUpperCase()+prop.readOnly[i].slice(1);p[fnName]=(function(fn,scope){return function(){return accessors(fn,scope,arguments)}})(fnName,p)}for(i=0,len=prop.readWrite.length;i<len;i++){fnName="get"+prop.readWrite[i].charAt(0).toUpperCase()+prop.readWrite[i].slice(1);p[fnName]=(function(fn,scope){return function(){return accessors(fn,scope,arguments)}})(fnName,p);fnName="set"+prop.readWrite[i].charAt(0).toUpperCase()+prop.readWrite[i].slice(1);p[fnName]=(function(fn,scope){return function(){return accessors(fn,scope,arguments)}})(fnName,p)}},getTranslations:function getTranslations(noCache){if(!this._cached.webkitTranslations||noCache){var values=this.getWebkitTransform().match(Dom.CSSMATRIXPATTERN);if(null===values){values=[0,0,0]}this._cached.webkitTranslations=[parseInt(values[1],10),parseInt(values[2],10)]}return this._cached.webkitTranslations},getWebkitTransform:function getWebkitTransform(noCache){if(!this._cached.webkitTransform||noCache){this._cached.webkitTransform=window.getComputedStyle(this.getDomObject()).webkitTransform}return this._cached.webkitTransform},setWebkitTransform:function setWebkitTransform(value){if(this._cached.webkitTransform||this._cached.webkitTranslations){this._cached.webkitTransform=null;this._cached.webkitTranslations=null}this.getDomObject().style.webkitTransform=value;return this},setTranslations:function setTranslations(x,y,unit){unit=unit||"px";this.setWebkitTransform(["translate3d(",x,unit,", ",y,unit,", 0)"].join(""));return this},getTranslateX:function getTranslateX(unit,noCache){return(unit?[this.getTranslations(noCache)[0],"px"].join(""):this.getTranslations(noCache)[0])},getTranslateY:function getTranslateY(unit,noCache){return(unit?[this.getTranslations(noCache)[1],"px"].join(""):this.getTranslations(noCache)[1])},setTranslateX:function setTranslateX(val){var valY=this.getTranslateY();this.setTranslations(val,valY);return this},setTranslateY:function setTranslateY(val){var valX=this.getTranslateX();this.setTranslations(valX,val);return this},setDomObject:function setDomObject(domNode){if(typeof domNode=="string"){var n=document.querySelector(domNode);if(null===n){throw"Invalid selector node doesn't exists ('"+domNode+"' given as selector)"}domNode=n}this._dom=domNode;if(domNode&&(!("id" in domNode)||domNode.id==="")){this._dom.id=oo.generateId(this._dom.tagName)}this.classList=new ClassList(this.getDomObject());return this},getDomObject:function getDomObject(){if(!this._dom){this.setDomObject(this._identifier)}return this._dom},find:function find(selector,returnNativeDom){var n=this.getDomObject().querySelector(selector);if(null===n){return null}else{return(returnNativeDom)?n:new Dom(n)}},findAll:function findAll(selector,returnNativeDom){var n=this.getDomObject().querySelectorAll(selector),res=[];if(null===n){return null}else{oo._convertNodeListToArray(n).forEach(function(item){res.push((returnNativeDom)?item:new Dom(item))});return res}},parent:function parent(cls,returnNativeDom){if(arguments.length<2){returnNativeDom=cls;cls=false}var retVal=cls?this.findParentByCls(cls.toString()):this.getDomObject().parentNode;return(returnNativeDom)?retVal:new Dom(retVal)},children:function children(returnNativeDom){var res;res=oo._convertNodeListToArray(this.getDomObject().children);if(returnNativeDom){var r=[];res.forEach(function(item){r.push(new Dom(item))});res=r}return res},findParentByCls:function findParentByCls(cls){var p=this.parent();while(p&&(Node.DOCUMENT_NODE!==p.getDomObject().nodeType)&&!p.classList.hasClass(cls)){p=p.parent()}if(p&&(Node.DOCUMENT_NODE!==p.getDomObject().nodeType)&&p.classList.hasClass(cls)){return p}else{return false}},appendDomNode:function appendDomNode(domNode){this.getDomObject().appendChild(domNode);return this},prependDomNode:function prependDomNode(domNode){this.getDomObject().insertBefore(domNode,this.getDomObject().firstChild);return this},appendChild:function appendChild(node){if(node instanceof Dom){this.appendDomNode(node.getDomObject())}else{this.appendDomNode(node)}return this},prependChild:function prependChild(node){if(node instanceof Dom){this.prependDomNode(node.getDomObject())}else{this.prependDomNode(node)}return this},appendHtml:function appendHtml(html){this.getDomObject().innerHTML+=html;return this},prependHtml:function appendHtml(html){var h=this.getDomObject().innerHTML;h=html+h;return this},html:function html(htmlString){if(1==arguments.length){this.clear();this.appendHtml(htmlString.toString());return this}else{return this.getDomObject().innerHTML}},removeChild:function removeChild(node){this.getDomObject().removeChild(node);return this},clear:function clear(){this.getDomObject().innerHTML="";return this},stopAnimation:function stopAnimation(){this.setWebkitTransitionDuration(0,"ms");this.getDomObject().removeEventListener("webkitTransitionEnd");return this},translateTo:function translateTo(coord,duration,listener,timingFunction){if(typeof coord==="object"){coord.x="undefined"!==typeof coord.x?coord.x:this.getTranslateX();coord.y="undefined"!==typeof coord.y?coord.y:this.getTranslateY()}var currentTransitionDuration=(this.getWebkitTransitionDuration()*1000);duration=duration||0;this.setWebkitTransitionDuration(duration,"ms");var currentTimingFunction=this.getWebkitTransitionTimingFunction();if(typeof timingFunction==="string"){this.setWebkitTransitionTimingFunction(timingFunction,"")}var that=this,endListener=function endListener(e){that.getDomObject().removeEventListener("webkitTransitionEnd",endListener);that.setWebkitTransitionTimingFunction(currentTimingFunction,"");if(listener){listener.call(that,e)}};this.getDomObject().addEventListener("webkitTransitionEnd",endListener,false);this.setTranslations(coord.x,coord.y);if(0===duration){endListener()}return this},setId:function setId(id){this.getDomObject().id=id},getId:function getId(id){var domId;try{domId=this.getDomObject().id}catch(e){domId=false}return domId},getUUID:function getUUID(id){return this._uuid},setTemplate:function setTemplate(tpl){this._template=tpl;return this},render:function render(data,tpl,resetCache){if(tpl){this.setTemplate(tpl)}if(!this._cacheTpl||resetCache){data=data||{};this._cacheTpl=Mustache.to_html(this._template,data)}this.appendHtml(this._cacheTpl);return this}})})(oo);(function(h){var o=this,n={};var m=h.getNS("oo.view").Element=h.Class(h.view.Dom,h.core.mixins.Events,h.core.mixins.Scroll,{STATIC:{APPEND:"append",PREPEND:"prepend",REFRESH_CONTENT:"refresh_content",register:function a(y,z){if(n[z]){throw"Already existing codename"}n[z]=y},get:function s(y){if(y in n){return n[y]}else{throw"Invalid codename"}},unregister:function a(y){delete n[y]},getTemplateEngine:function k(){if(null===m.templateEngine){m.templateEngine=new (h.view.templateengine.Template.get(h.getConfig("templateEngine")))()}return m.templateEngine},templateEngine:null},_uiElements:null,_needToRender:true,_tpl:null,_container:null,constructor:function q(y){if(!y||typeof y!="object"){throw'call Element constructor but "options" missing'}if(!y.hasOwnProperty("el")){throw'call Element constructor but "el" property of object options is missing'}m.Super.call(this,y.el);if(y.hasOwnProperty("template")){this.setTemplate(y.template);delete y.template}if(y.hasOwnProperty("onEnabled")){this.onEnabled=y.onEnabled;delete y.onEnabled}if(y.hasOwnProperty("scrollable")){if(true===y.scrollable){this.setScrollable({el:this.parent()})}else{this.setScrollable(y.scrollable)}}this._uiElements={}},getEl:function w(y){return this._uiElements[y]||null},addEl:function f(z,y){this._uiElements[y||z.getUUID()]=z;z.setContainer(this)},removeEl:function u(z){var y=this.getEl(z);if(null!==y){this._uiElements.slice(this._uiElements.indexOf(y),1);y.destroy()}},initElement:function r(){for(var z in this._uiElements){var y=this._uiElements[z];if("needToRender" in y&&y.needToRender()){y.renderTo(this)}}return this},createElement:function l(A,y){var z=h.createElement(A,y);this.addEl(z,y.id||null);return z},setContainer:function d(y){this._container=y},getContainer:function p(){return this._container},needToRender:function j(){return this._needToRender},setTemplate:function b(y){this._tpl=y||""},getTemplate:function t(){return this._tpl},render:function x(z,y){if(!y||""===y){y=this.getTemplate()}if(!y){return""}var A=m.getTemplateEngine();return A.render(y,z||{})},renderTo:function v(E,C,A,z){var B=this.render(C,A),D=E.find("#"+this.getId())||E;var F="",y="Child";if(typeof B==="string"){y="Html"}if([m.APPEND,m.PREPEND].indexOf(z)!==-1){F=z}else{if("Child"===y){F="append"}else{y=y.toLowerCase()}}D[F+y](B);this._onEnabled()},_onEnabled:function c(){this.onEnabled();this.initElement();this.triggerBubblingEvent(h.view.Element.REFRESH_CONTENT)},onEnabled:function g(){},triggerBubblingEvent:function e(A,B,C){if(!h.isArray(B)){B=B?[B]:[]}var z=this.getContainer(),y=B[0]||null;if(!C){y={id:h.generateId(),bubble:true,stopPropagation:function(){this.bubble=false}};B.splice(0,0,y)}this.triggerEvent(A,B);if(y.bubble&&z&&z.triggerBubblingEvent){z.triggerBubblingEvent(A,B,y.id)}}});h.view.Element.register(m,"node")})(oo);(function(h){var c=this;var j=h.getNS("oo.view").ModelElement=h.Class(h.view.Element,{_model:null,_tplError:null,setTemplateError:function e(n){this._tplError=n||""},getTemplateError:function g(){return this._tplError},constructor:function d(n){if(n.hasOwnProperty("model")){this.setModel(n.model);delete n.model}if(n.hasOwnProperty("templateError")){this.setTemplateError(n.templateError);delete n.templateError}j.Super.call(this,n)},afterFetch:function k(o){var n=this.render(o,this._tpl);this.appendHtml(n)},setModel:function m(n){if(n instanceof h.data.Model){this._model=n}else{this._model=h.createModel(n)}this._model.addListener(h.data.Model.AFTER_FETCH,h.createDelegate(function(o){this.renderTo(this,o.getData());if(this.isScrollable){this.scroll.refresh()}},this))},markAsError:function f(){this.renderTo(this.getContainer())},prepareData:function l(n){return n},render:function b(o,n){if(!o){n=this.getTemplateError()}return j.Super.prototype.render.call(this,this.prepareData(o||{}),n||null)},getModel:function a(){return this._model}});h.view.Element.register(j,"modelNode")})(oo);(function(oo){var global=this;var Viewport=oo.getNS("oo.view").Viewport=oo.Class(oo.view.Dom,{STATIC:{ANIM_RTL:"1",ANIM_LTR:"2",ANIM_UP:"3",ANIM_DOWN:"4",ANIM_SIBLING:"5",NO_ANIM:"none",ANIM_DURATION:350,APPEND_TO_STAGE:"append",PREPEND_TO_STAGE:"prepend"},constructor:function constructor(root){root=root||oo.getConfig("viewportSelector");Viewport.Super.call(this,root);this._panelClasses={};this._panels=[];this._panelsDic=[];this._enabledPanels=[];this._focusedStack=[];this._stages={main:{}}},hasPanel:function hasPanel(panel){return -1!=this._panelsDic.indexOf(panel)?true:false},addPanel:function addPanel(identifier,autoShow,autoRender,animDirection){var p=new (this._panelClasses[identifier])();p.setId(identifier);this._panels.push(p);this._panelsDic.push(identifier);if(autoRender||autoShow){if(!this.panelIsEnable(identifier)){this._enablePanel(identifier)}}if(autoShow){animDirection=autoRender||animDirection;this.showPanel(identifier,animDirection)}},_identifierToIndex:function _identifierToIndex(identifier){var index;if(typeof identifier=="string"){index=this._panelsDic.indexOf(identifier)}return index},_indexToIdentifier:function _indexToIdentifier(index){return this._panelsDic[index]},_enablePanel:function _enablePanel(identifier){var index=this._identifierToIndex(identifier),panel=this._panels[index];panel.renderTo(this);this._enabledPanels.push(index)},getFocusedPanel:function getFocusedPanel(getIndex){index=this._focusedStack[this._focusedStack.length-1];if(getIndex){return undefined!==index?index:false}else{return this.getPanel(this._indexToIdentifier(index))}},panelIsEnable:function panelIsEnable(identifier){return(-1!=this._enabledPanels.indexOf(this._identifierToIndex(identifier))?true:false)},removePanel:function removePanel(panel){var index=this._identifierToIndex(panel);this._panels[index].destroy();this._panels.slice(index,1);this._panelsDic.slice(index,1);this._enabledPanels.slice(this._enabledPanels.indexOf(index),1)},showPanel:function showPanel(panelIdentifier,direction){var p=this.getPanel(panelIdentifier);if(!this.panelIsEnable(panelIdentifier)){this._enablePanel(panelIdentifier)}p.show(direction||Viewport.ANIM_RTL);var index=this._identifierToIndex(panelIdentifier);this._focusedStack.push(index)},hidePanel:function hidePanel(panelIdentifier,direction,destroy){direction=direction||Viewport.ANIM_RTL;var p=this.getPanel(panelIdentifier);p.hide(direction||Viewport.ANIM_RTL);var index=this._identifierToIndex(panelIdentifier);if(index==this.getFocusedPanel(true)){this._focusedStack.pop()}},switchPanel:function switchPanel(oldPanel,newPanel,direction){var dir,oldP,newP;if(arguments.length<=2){dir=newPanel;newP=oldPanel;oldP=this._indexToIdentifier(this.getFocusedPanel(true))}else{oldP=oldPanel;newP=newPanel;dir=direction}if(!dir){var oldPStage=this._getStageDic()[oldP],newPStage=this._getStageDic()[newP];if(oldPStage==newPStage){var stageNS=this._stringToStageObj(oldPStage);if(stageNS.panels.indexOf(oldP)>stageNS.panels.indexOf(newP)){dir=Viewport.ANIM_LTR}else{dir=Viewport.ANIM_RTL}}else{dir=Viewport.NO_ANIM}}this.showPanel(newP,dir);if(oldP){this.hidePanel(oldP,dir)}},register:function register(id,p,stage,pos){this._panelClasses[id]=p;stage||(stage="main");var conf=oo.override({stage:"main",pos:Viewport.APPEND_TO_STAGE},{stage:stage,pos:pos});if(!this.addToStage(id,conf.stage,conf.pos)){throw"The panel has not been added to a stage - it has already been added in another stage"}},getPanel:function getPanel(identifier){if(!this.hasPanel(identifier)){this.addPanel(identifier,false,false)}return this._panels[this._identifierToIndex(identifier)]||false},_stages:null,_stageDic:null,_getStageDic:function _getStageDic(){this._stageDic||(this._stageDic={});return this._stageDic},_stringToStageObj:function _stringToStageObj(str){var stageObj;if("string"===typeof str){eval("stageObj = this._stages."+str)}return stageObj},getStage:function getStage(stage){return this._stringToStageObj(stage).panels||[]},createStage:function createStage(name,into){var re=/^[a-zA-Z]*$/,names=name.split("."),ns="this._stages";names.forEach(function(item){if(re.test(item)&&item!="panels"){ns+="."+item;eval(ns+" || ("+ns+" = {})")}else{throw"Invalid name or namespace for a stage name"}},this);return eval(ns)},removeStage:function removeStage(stage){var stageObj,lastIndex=stage.lastIndexOf("."),lastPart,parentStage;if(-1!==lastIndex){lastPart=stage.substr(lastIndex+1);parentStage=stage.substr(0,lastIndex);stageObj=this._stringToStageObj(parentStage)}else{lastPart=stage;stageObj=this._stages}stageObj[lastPart]=null;delete stageObj[lastPart]},addToStage:function addToStage(panel,stage,position){if(this._getStageDic()[panel]){return false}var stageObj,index=parseInt(position,10);stageObj=this._stringToStageObj(stage);if(!stageObj){stageObj=this.createStage(stage)}position=position||Viewport.APPEND_TO_STAGE;if(!stageObj.panels){stageObj.panels=[]}posToInsert=position==Viewport.APPEND_TO_STAGE?stageObj.panels.length:position==Viewport.PREPEND_TO_STAGE?0:null;if(null===posToInsert){stageObj.panels[parseInt(position,10)]=panel}else{stageObj.panels.splice(posToInsert,0,panel)}this._getStageDic()[panel]=stage;return true},removeFromStage:function removeFromStage(panel){var stageObj;stageObj=this._stringToStageObj(this._getStageDic()[panel]);stageObj.panels.splice(stageObj.panels.indexOf(panel),1);this._getStageDic()[panel]=null;delete this._getStageDic()[panel]}})})(oo||{});(function(e){var h=e.getNS("oo.view").Panel=e.Class(e.view.Element,{STATIC:{ON_SHOW:"on_show",ON_HIDE:"on_hide"},_data:null,constructor:function c(){h.Super.call(this,{el:document.createElement("div")});var m=this;this._data={};if("init" in this){this.init()}},render:function b(){this.classList.addClass("oo-panel");this.html(h.Super.prototype.render.call(this,this._data));return this},destroy:function j(){},show:function k(m){this.animShow(m);this.triggerEvent(h.ON_SHOW,[this])},animShow:function a(q){var n=e.view.Viewport,o=e.getViewport();q=q||n.ANIM_RTL;var m=0;if(q!==n.NO_ANIM){var p=o.getWidth(false,true)*(q==n.ANIM_RTL?1:-1);this.setTranslateX(p);m=n.ANIM_DURATION}this.setDisplay("block","");var r=this;this.translateTo({x:0},m)},hide:function d(m){this.animHide(m);this.triggerEvent(h.ON_HIDE,[this])},animHide:function g(r){var n=e.view.Viewport,o=e.getViewport();r=r||n.ANIM_RTL;var m=0;if(r!==n.NO_ANIM){m=n.ANIM_DURATION}var q=o.getWidth(false,true)*(r==n.ANIM_RTL?-1:1);var p=this;this.translateTo({x:q},m,function(){p.setDisplay("none")})},refresh:function f(){var m=e.getViewport();m.getWidth(null,true);m.getHeight(null,true)},setData:function l(m){this._data=m}})})(oo||{});(function(g){var c=g.core.Touch;var k=g.getNS("oo.view").List=g.Class(g.view.ModelElement,{STATIC:{EVT_ITEM_PRESSED:"item-pressed",EVT_ITEM_RELEASED:"item-released"},_structTpl:"",_touchedItem:null,_noStructure:true,_identityField:"",_listItemCls:"",_listItemDataAttrib:"",_eventInitialized:false,constructor:function d(l){var m={noStructure:true,structure:'<ul>{{#loop}}<li data-yellowjs-list-item-id="{{key}}" class="yellowjs-list-item">{{tpl}}</li>{{/loop}}</ul>',identityField:"key",listItemCls:"yellowjs-list-item",listItemDataAttrib:"data-yellowjs-list-item-id"};l=g.override(m,l);this._noStructure=!!l.noStructure;if(!this._noStructure){this._setStructTpl(l.structure)}this._identityField=l.identityField;this._listItemCls=l.listItemCls;this._listItemDataAttrib=l.listItemDataAttrib;k.Super.call(this,l)},setTemplate:function b(l){if(!this._noStructure){this._tpl=this._genTplWithStructure(l)}else{var m=/.*\{\{#loop\}\}.*\{\{\/loop\}\}.*/;if(!m.test(l.replace(/\n/g,""))){throw'Invalid template - template should have a "loop" pattern'}this._tpl=l}},_initEvents:function a(){var n=this,m;function l(q){q=(Node.TEXT_NODE===q.nodeType)?q.parentNode:q;var o=new g.view.Dom(q);var r;if(!o.classList.hasClass(this._listItemCls)){var p=o.findParentByCls(n._listItemCls);if(p){o=p}}r=o.getDomObject().getAttribute(n._listItemDataAttrib)||o.getId();if(r){return{id:r,dom:o,row:(r?n.getModel().getBy(n._identityField,r):null)}}return false}this.getDomObject().addEventListener(c.EVENT_START,function(o){this._touchedItem=o.target;m=l(o.target);if(false!==m){m.dom.classList.addClass("active");n.triggerEvent(k.EVT_ITEM_PRESSED,[m.dom,m.id,m.row])}},false);this.getDomObject().addEventListener(c.EVENT_MOVE,function(p){if(this._touchedItem){this._touchedItem=null;var o=n.find(".active");if(null!==o){o.classList.removeClass("active")}}},false);this.getDomObject().addEventListener(c.EVENT_END,function(o){m=l(o.target);if(false!==m&&this._touchedItem==o.target){m.dom.classList.removeClass("active");n.triggerEvent(k.EVT_ITEM_RELEASED,[m.dom,m.id,m.row])}},false);this._eventInitialized=true},prepareData:function j(l){return{loop:l}},renderTo:function h(o,n,m){k.Super.prototype.renderTo.call(this,o,n,m);var l=this.getModel().getData();if(l.length){this.children().forEach(function(q,p){var r=new g.view.Dom(q);r.classList.addClass(this._listItemCls);r.getDomObject().setAttribute(this._listItemDataAttrib,l[p][this._identityField])},this)}if(!this._eventInitialized){this._initEvents()}},_genTplWithStructure:function f(l){return this._structTpl.replace("{{tpl}}",l||"")},_setStructTpl:function e(l){if(!l){throw Error("Template must be declared")}this._structTpl=l}});g.view.Element.register(k,"list")})(oo||{});(function(h){var d=h.core.Touch;var f=h.getNS("oo.view").Button=h.Class(h.view.Element,{STATIC:{EVT_TOUCH:"touch",EVT_RELEASE:"release"},constructor:function e(m){if(!m||typeof m!="object"){throw'call Element constructor but "options" missing'}if(!m.hasOwnProperty("el")){throw'call Element constructor but "el" property of object options is missing'}if(m.hasOwnProperty("onrelease")&&typeof m.onrelease==="function"){this.onRelease=m.onrelease;delete m.onRelease}f.Super.call(this,m);this._active=false;this._initEvents()},_needToRender:false,_initEvents:function a(){this.getDomObject().addEventListener(d.EVENT_START,h.createDelegate(this._onTouch,this),false);this.getDomObject().addEventListener(d.EVENT_MOVE,h.createDelegate(this._onMove,this),false);this.getDomObject().addEventListener(d.EVENT_END,h.createDelegate(this._onRelease,this),false)},_onTouch:function c(m){this.setActive(true);this.triggerEvent(f.EVT_TOUCH,[this,m])},_onMove:function g(m){this.setActive(false)},_onRelease:function j(m){if(this.isActive()){this.setActive(false);this.onRelease();this.triggerEvent(f.EVT_RELEASE,[this,m])}},onRelease:function k(){},isActive:function l(){return this._active},setActive:function b(m){this._active=!!m;this.classList[(this._active?"add":"remove")+"Class"]("active")}});h.view.Element.register(f,"button")})(oo||{});var oo=(function(z){var G=z.view.Dom,A=z.core.Touch,K=z.getNS("oo.view");var x=K.Carousel=z.Class(z.view.ModelElement,z.core.mixins.Events,{STATIC:{EVENT_ON:"EVENT_ON",EVENT_GOTO:"EVENT_GOTO",EVENT_PRESS:"EVENT_PRESS",CLS_SHOWING:"is-showing",CLS_ACTIVE:"item-active"},_datas:null,_elementCls:null,_items:null,_available:true,_newPanel:null,_upPrev:false,_upNext:false,_fromLimit:true,_activePanel:null,_transitionType:"Slide",_swipe:false,_pagerOpt:false,_startX:null,_currentTranslate:null,constructor:function b(S){if(!S){throw new Error("Missing options")}this._startX=0;this._startTranslate=0;var R={target:S.el||(document.createElement("div"))};x.Super.call(this,R);this._transitionDuration=S.duration||200;this._items=[];if(S&&S.hasOwnProperty("transitionType")){this._transitionType=S.transitionType.charAt(0).toUpperCase()+S.transitionType.slice(1);delete S.transitionType}if(S&&S.hasOwnProperty("swipe")){this._swipe=true;delete S.swipe}if(S&&S.hasOwnProperty("pager")){this._pagerOpt=S.pager;delete S.pager}if(S&&S.hasOwnProperty("model")){if(!S.hasOwnProperty("elementCls")){throw new Error("Options passed but missing elementCls")}if("[object Object]"!==Object.prototype.toString.call(S.elementCls)){throw new Error("elementCls must be an object")}this._elementCls=S.elementCls;delete S.elementCls;this._prepareModel(S.model)}else{this._prepareView()}},_prepareModel:function g(R){var S=this;this.setModel(R);this._model.fetch(function(T){S._datas=T;S._addPanel(0);S._addPanel(1);S._prepareView()})},updateModel:function I(R){this.clear();this._items=[];this._available=true;this._datas=null;this._available=true;this._newPanel=null;this._upPrev=false;this._upNext=false;this._fromLimit=true;this._activePanel=null;this._prepareModel(R)},_prepareView:function N(){this._nbPanel=this._datas.length-1||document.querySelectorAll([this._identifier," > *"].join("")).length;this._panelWidth=(new G(this.getDomObject().firstElementChild)).getWidth();var T=this.getDomObject().children,S=0,R=T.length;for(S;S<R;S++){T[S].style.width=this._panelWidth+"px"}this._activePanel=0;this["_prepareView"+this._transitionType]();this._displayPager=this._pagerOpt;this._pager=null;this._buildPager();this._moved=false;this.render()},_prepareViewSlide:function D(){this.setWidth((this._model)?this._panelWidth*3:this._panelWidth*this._nbPanel,"px")},_prepareViewCustom:function e(){this._items[this._activePanel].classList.addClass(x.CLS_ACTIVE)},_addPanel:function a(T,S){var R=this._getItem(T);if(this._panelWidth){R.setWidth(this._panelWidth,"px")}this[(S?"prependChild":"appendChild")](R.getDomObject());R.onEnable()},isAvailable:function C(){return this._available},showPanel:function M(U){if("undefined"===typeof U){throw new Error("Missing 'id' of the panel")}if(this._pager&&this._pager instanceof z.view.Slider){this._pager.setDisabled()}if(U!==this._activePanel&&this._datas[U]&&this._available){if(U>this._activePanel+1){this._updateNext(U);this._upPrev=true}if(U<this._activePanel-1){this._updatePrev(U);this._upNext=true}}this._available=false;var R=(U<this._activePanel?+1:-1);this["_setTransition"+this._transitionType](U,R);var S=this._activePanel?this._getItem(this._activePanel):null,T=this._getItem(this._newPanel);this.triggerEvent(x.EVENT_GOTO,[this._newPanel,S,T]);this._updatePager(this._newPanel);if(this._newPanel===this._activePanel){this._available=true;if(this._pager&&this._pager instanceof z.view.Slider){this._pager.setEnabled()}}},_setTransitionSlide:function t(T,S){var R;if(T>=0&&T<=this._nbPanel&&T!==this._activePanel){R=this._currentTranslate+S*this._panelWidth}else{if(T===this._activePanel){R=this._currentTranslate}else{if(T<0){R=0;T=0}else{R=this._currentTranslate;T=this._nbPanel}}}this.translateTo({x:R},this._transitionDuration);this._currentTranslate=R;this._newPanel=T},_setTransitionCustom:function n(T,R){var S=this;if(T<0){T=0}else{if(T>this._nbPanel){T=this._nbPanel}}if(T!==this._activePanel&&!this._items[T].classList.hasClass(x.CLS_SHOWING)){if(!this._items[T].isInit){this._items[T].getDomObject().addEventListener("webkitTransitionEnd",function(){S.onEndTransition.apply(S)},false);this._items[T].isInit=true}setTimeout(function(){S._items[T].classList.addClass(x.CLS_SHOWING)},1)}else{this._available=true}this._newPanel=T},_updateNext:function F(R){this.removeChild(this.getDomObject().lastChild);this._addPanel(R)},_updatePrev:function h(R){this.removeChild(this.getDomObject().firstChild);this._addPanel(R,true)},_getItem:function r(S){var R=this._items;if(!R[S]){R[S]=this._prepareItem(S)}return R[S]},_prepareItem:function p(U){var T,R=this._datas[U].elementCls,S=this;if("undefined"===this._elementCls[R]||"function"!==typeof this._elementCls[R]){throw new Error("element Cls must exist and be a function")}T=new this._elementCls[R]();T.data=this._datas[U];T.appendHtml(T.render(T.data));return T},_buildPager:function B(){if(this._displayPager){if("boolean"===typeof this._displayPager){this._buildPagerItem()}else{this._pager=this._displayPager;if(this._displayPager instanceof z.view.List){this._buildPagerList()}if(this._displayPager instanceof z.view.Slider){this._buildPagerSlider()}if(this._displayPager instanceof z.view.PagerPrevNext){this._buildPagerPrevNext()}}}},_buildPagerItem:function o(){this._pager=G.createElement("div");this._pager.classList.addClass("carousel-pager");this._pager.setTemplate('{{#bullet}}<i class="dot"></i>{{/bullet}}');var S=[];for(var R=0;R<this._nbPanel;R++){S.push(R)}this._pager.render({bullet:S})},_buildPagerList:function f(){var R=this;this._pager.addListener(z.view.List.EVT_ITEM_RELEASED,function(S,T){if(parseInt(T,10)===R._activePanel||!R._available){return}R.showPanel(parseInt(T,10))})},_buildPagerSlider:function v(){var R=this;this._pager.addListener(z.view.SliderCursor.EVT_ONGOTO,function(S){if(R.isAvailable()){R.showPanel(S)}})},_buildPagerPrevNext:function c(){var R=this;this._pager.addListener(z.view.PagerPrevNext.goToNext,function(){R.goToNext.call(R)});this._pager.addListener(z.view.PagerPrevNext.goToPrev,function(){R.goToPrev.call(R)})},_updatePager:function P(S){if(this._displayPager){if("boolean"===typeof this._displayPager){var R=this._pager.getDomObject().querySelector(".dot.active");if(R){R.className=R.className.replace(/ *active/,"")}this._pager.getDomObject().querySelector([".dot:nth-child(",(this._activePanel+1),")"].join("")).className+=" active"}else{if(this._pager instanceof z.view.Slider){this._pager.goTo(S)}if(this._pager instanceof z.view.PagerPrevNext){if(0===S){this._pager.buttonPrev.classList.addClass(z.view.PagerPrevNext.CLS_DISABLE)}else{this._pager.buttonPrev.classList.removeClass(z.view.PagerPrevNext.CLS_DISABLE)}if(this._nbPanel===S){this._pager.buttonNext.classList.addClass(z.view.PagerPrevNext.CLS_DISABLE)}else{this._pager.buttonNext.classList.removeClass(z.view.PagerPrevNext.CLS_DISABLE)}}}}},hasMoved:function w(){return this._moved},_initListeners:function k(){var S=this.getDomObject();var R=this;var T;S.addEventListener(A.EVENT_START,function(U){if(R._available){R._startX=this._lastPos=A.getPositionX(U);R["_transitionStart"+R._transitionType]();T=0;R.triggerEvent(x.EVENT_PRESS)}},false);S.addEventListener(A.EVENT_MOVE,function(V){if(V.type=="mousemove"){return}if(R._available){this._lastPos=A.getPositionX(V);var U=this._lastPos-this._startX;if(Math.abs(U)>70){R["_transitionMove"+R._transitionType](U);R._moved=true}}},false);S.addEventListener(A.EVENT_END,function(){if(R._available){R._moved=false;var U=this._lastPos,V=U-R._startX;R["_transitionEnd"+R._transitionType](U,V)}},false);window.addEventListener("orientationchange",function(){R.refresh()},false);if(this._swipe){S.addEventListener("swipeRight",function(U){R.goToNext()},false);S.addEventListener("swipeLeft",function(U){R.goToPrev()},false)}if(this._transitionType!=="Custom"){S.addEventListener("webkitTransitionEnd",function(U){R.onEndTransition()},false)}},_transitionStartSlide:function m(){this._startTranslate=this.getTranslateX()},_transitionMoveSlide:function l(R){this.translateTo({x:(this._startTranslate+R)},0)},_transitionEndSlide:function H(R,S){if(Math.abs(S)>150){if(R-this._startX<0){this.goToNext()}else{this.goToPrev()}}else{this.translateTo({x:(null!==this._currentTranslate)?this._currentTranslate:(this._currentTranslate=this._startTranslate)},this._transitionDuration)}},_transitionStartCustom:function q(){},_transitionMoveCustom:function L(){},_transitionEndCustom:function J(){},goToNext:function j(){if(this._available){this.showPanel(this._activePanel+1)}},goToPrev:function E(){if(this._available){this.showPanel(this._activePanel-1)}},onEndTransition:function Q(){if(this._activePanel==this._newPanel){this._available=true;return}this["_endTransition"+this._transitionType](this._newPanel);if(this._newPanel>this._activePanel){if(!this._fromLimit){this.removeChild(this.getDomObject().firstChild);if(this._transitionType=="Slide"){this.translateTo({x:this._currentTranslate+this._panelWidth});this._currentTranslate=this._currentTranslate+this._panelWidth}}if(this._newPanel<this._nbPanel){this._addPanel(this._newPanel+1)}}if(this._newPanel<this._activePanel){if(!this._fromLimit){this.removeChild(this.getDomObject().lastChild)}if(this._newPanel>0){if(this._transitionType=="Slide"){this.translateTo({x:this._currentTranslate-this._panelWidth})}this._addPanel(this._newPanel-1,true);if(this._transitionType=="Slide"){this._currentTranslate=this._currentTranslate-this._panelWidth}}}if(this._upPrev){this._updatePrev(this._newPanel-1);this._upPrev=false}if(this._upNext){this._updateNext(this._newPanel+1);this._upNext=false}this._fromLimit=(this._newPanel<1||this._newPanel==this._nbPanel)?true:false;this._activePanel=this._newPanel;this._available=true;if(this._pager&&this._pager instanceof z.view.Slider){this._pager.setEnabled()}this.triggerEvent(x.EVENT_ON,[this._activePanel])},_endTransitionSlide:function d(R){},_endTransitionCustom:function u(R){this._items[R].classList.removeClass(x.CLS_SHOWING);this._items[this._activePanel].classList.removeClass(x.CLS_ACTIVE);this._items[R].classList.addClass(x.CLS_ACTIVE)},render:function y(){if(this._pager){if("boolean"===typeof this._displayPager){(new G(this.getDomObject().parentNode)).appendChild(this._pager)}else{if(this._pager instanceof z.view.List){this._pager.appendHtml(this._pager.render(this._datas))}}}this._initListeners()},refresh:function O(){var R=this._panelWidth,S;this._panelWidth=(new G(this.getDomObject().firstElementChild)).getWidth();S=R-this._panelWidth;this.translateTo({x:this._currentTranslate+S},0);this._startTranslate=this._currentTranslate+S},getPanel:function s(R){if(undefined===R){throw new Error("Missing id")}if(!this._items){return}return this._items[R]}});z.view.Element.register(x,"carousel");return z})(oo||{});(function(){var c=oo.core.Touch;var b=oo.getNS("oo.view").Slider=oo.Class(oo.view.ModelElement,{constructor:function a(e){b.Super.call(this,e)},goTo:function d(){throw"Can't be called directly from Slider class"}});oo.view.Element.register(b,"slider")})();(function(){var d=oo.core.Touch;var f=oo.getNS("oo.view").SliderCursor=oo.Class(oo.view.Slider,oo.core.mixins.Events,{_tplItems:"{{key}}",_tplOverlay:"{{key}}",_datas:null,_step:null,_total:null,_overlay:null,_enabled:true,STATIC:{EVT_ONGOTO:"onGoTo"},constructor:function g(l){f.Super.call(this,l);if(!l.hasOwnProperty("translate")){throw new Error("Missing translate property")}this._prepareView(l)},_initEvents:function a(n){var A=null,y=this,q=false,t=this.getDomObject(),o=this.getWidth(),x=this.getHeight(),r=t.offsetLeft,p=this._cursor.getDomObject().offsetTop,v=r+this._cursor.getWidth()/2+this._cursor.getLeft(),s=p+this._cursor.getHeight()/2+this._cursor.getTop(),m=r+o,l=p+x,w=(n.translate.x)?true:false,u=(n.translate.y)?true:false,B=null;var z;if(this._datas){this._step=(o/(y._total-1))/2}t.addEventListener(d.EVENT_START,function(C){if(!y.isEnabled()){return}A=d.getPosition(C);q=true;y._cursor.setWebkitTransitionDuration(0,"ms");if(w){B=A[0]-v;y._cursor.setTranslateX(B,"px");if(y._step&&y._overlay){y._overlay.setDisplay("block");z=((Math.ceil(B/y._step)-1)%2!==0)?Math.ceil(B/(y._step*2)):Math.ceil(B/(y._step*2)-1);y._updateOverlay(z)}}if(u){y._cursor.setTranslateY(A[1]-s,"px")}},false);t.addEventListener(d.EVENT_MOVE,function(E){if(!y.isEnabled()){return}var I=d.getPosition(E),C=I[0],H=I[1];var D=(((C-v)-B)>0)?"right":"left",G=false,F;if(q){if(w&&C>=r&&C<=m){B=C-v;y._cursor.setTranslateX(B,"px");if(y._step&&y._overlay){if("right"===D){if((Math.ceil(B/y._step)-1)%2!==0){F=Math.ceil(B/(y._step*2));G=true}}else{if((Math.ceil(B/y._step)-1)%2===0){F=Math.ceil(B/(y._step*2)-1);G=true}}if(G&&z!==F){z=F;y._updateOverlay(z)}}}if(u&&H>=p&&H<=l){y._cursor.setTranslateY(H-s,"px")}}},false);t.addEventListener(d.EVENT_END,function(C){if(!y.isEnabled()){return}q=false;if(parseInt(z,10)!==null){y.goTo(z);y.triggerEvent(f.EVT_ONGOTO,[z])}if(y._overlay){y._overlay.setDisplay("none")}},false)},goTo:function b(l){if(this._cursor){this._cursor.setTranslateX((l*(this._step*2))+this._cursor.getLeft()/2,"px");this._cursor.setWebkitTransitionDuration(200,"ms")}},_prepareView:function c(l){var m=this;var n=function n(){if(l.hasOwnProperty("cursor")){m._cursor=oo.createElement("node",{el:l.cursor});m._cursor.getDomObject().style.position="absolute";m.getDomObject().style.position="relative";m._initEvents(l)}};if(l.overlay){this._overlay=oo.createElement("node",{el:l.overlay,template:l.overlayTemplate||this._tplOverlay});this._overlay.setDisplay("none")}if(this._model){if(l.items){m._createItems(l)}this._model.fetch(function(o){m._datas=o;m._total=m._datas.length;if(m.list){m.list.appendHtml(m.list.render(o))}n()})}else{n()}},_updateOverlay:function e(l){this._overlay.appendHtml(this._overlay.render(this._datas[l]))},_createItems:function h(l){this.list=oo.createElement("list",{el:l.items.el,template:l.items.template||this._tplItems,model:this._model})},setDisabled:function j(){this._enabled=false},setEnabled:function j(){this._enabled=true},isEnabled:function k(){return this._enabled}});oo.view.Element.register(f,"sliderCursor")})();(function(m){var j=m.view.Dom,f=m.core.Touch,p=m.getNS("oo.view");var d=p.Popin=m.Class(m.view.Element,{STATIC:{CLS_OPENED:"pl-popin-opened",CLS_OPENING:"pl-popin-is-showing",CLS_CLOSING:"pl-popin-is-hiding",CLS_CLOSED:"pl-popin-closed"},_isOpened:true,onOpen:null,onClose:null,closeOnTap:false,constructor:function g(s){d.Super.call(this,s);if(s.hasOwnProperty("close")){this._createButtonClose(s.close)}if(s.hasOwnProperty("closeOnTap")){this.closeOnTap=s.closeOnTap}if(!this.classList){this.setDomObject()}this.onOpen=s.onOpen||m.emptyFn;this.onClose=s.onClose||m.emptyFn;this._initEvents();this._isOpened=(this.classList.hasClass(d.CLS_CLOSED))?false:true;if(this._isOpened&&!this.classList.hasClass(d.CLS_OPENED)){this._setOpened()}},_isClosing:function o(){return this.classList.hasClass(d.CLS_CLOSING)},_isOpening:function n(){return this.classList.hasClass(d.CLS_OPENING)},_opening:function c(){if(!this._isOpening()){this.classList.addClass(d.CLS_OPENING)}},_setOpened:function b(){if(this._isOpening()){this.classList.removeClass(d.CLS_OPENING)}if(!this.classList.hasClass(d.CLS_OPENED)){this.classList.addClass(d.CLS_OPENED)}},_closing:function e(){if(!this._isClosing()){this.classList.addClass(d.CLS_CLOSING)}},_setClosed:function h(){if(this._isClosing()){this.classList.removeClass(d.CLS_CLOSING)}if(!this.classList.hasClass(d.CLS_CLOSED)){this.classList.addClass(d.CLS_CLOSED)}},open:function k(){this.classList.removeClass(d.CLS_CLOSED);this.classList.removeClass(d.CLS_CLOSING);this._opening();this._isOpened=true;this.onOpen()},close:function q(){this.classList.removeClass(d.CLS_OPENED);this.classList.removeClass(d.CLS_OPENING);this._closing();this._isOpened=false;this.onClose()},_createButtonClose:function l(t){var s=m.createElement("button",t),u=this;s.addListener(m.view.Button.EVT_RELEASE,function(){u.close()})},isOpened:function r(){return this._isOpened},_initEvents:function a(){var s=this;this.getDomObject().addEventListener("webkitTransitionEnd",function(){s[!s._isOpened?"_setClosed":"_setOpened"]()},false);if(this.closeOnTap){var t=function t(){s.close()};this.getDomObject().addEventListener(m.core.Touch.EVENT_END,t,false)}}});m.view.Element.register(d,"popin")})(oo||{});(function(a){var b=a.view.Button;var e=a.getNS("oo.view").PagerPrevNext=a.Class(null,a.core.mixins.Events,{buttonPrev:null,buttonNext:null,STATIC:{goToNext:"goToNext",goToPrev:"goToPrev",CLS_DISABLE:"button-disable"},constructor:function c(f){if(!f){throw new Error("Missing options")}if(!f.hasOwnProperty("prev")||!f.hasOwnProperty("next")){throw new Error("Missing previous or next configuration")}this.buttonPrev=f.prev;this.buttonNext=f.next;delete f.buttonPrev;delete f.buttonNext;if(!(this.buttonPrev instanceof b)&&("string"===typeof this.buttonPrev||"object"===typeof this.buttonPrev)){this.buttonPrev=a.createElement("button",{el:this.buttonPrev})}if(!(this.buttonNext instanceof b)&&("string"===typeof this.buttonNext||"object"===typeof this.buttonNext)){this.buttonNext=a.createElement("button",{el:this.buttonNext})}this._attachEvents()},_attachEvents:function d(){var f=this;this.buttonPrev.addListener(b.EVT_RELEASE,function(){f.triggerEvent(e.goToPrev)});this.buttonNext.addListener(b.EVT_RELEASE,function(){f.triggerEvent(e.goToNext)})}});a.view.Element.register(e,"pagerPrevNext")})(oo||{});(function(c){var g=c.view.Dom,f=c.core.Touch;var b=c.getNS("oo.view").Accordion=c.Class(c.view.Element,{STATIC:{CLS_OPENED:"accordion-section-opened",CLS_CLOSED:"accordion-section-closed",SELET_HEADER:"[data-accordionheader]",SELET_SECTION:"[data-accordioncontent]"},_isOpened:true,_needToRender:false,_openedSection:null,constructor:function e(j){b.Super.call(this,j);this._prepareView()},_prepareView:function h(){var k=this,j=function j(m,l){if(l.classList.hasClass(b.CLS_OPENED)){k.closeSection(l)}else{k.openSection(l)}k.triggerBubblingEvent(c.view.Element.REFRESH_CONTENT)};this.children().forEach(function(n){var m=new c.view.Dom(n);k.closeSection(m);var l=c.createElement("button",{el:m.find("[data-accordionheader]",true)});l.addListener(c.view.Button.EVT_RELEASE,function(o){j(o,m)})})},closeSection:function a(j){j.classList.removeClass(b.CLS_OPENED);j.classList.addClass(b.CLS_CLOSED)},openSection:function d(j){if(this._openedSection!==null){this.closeSection(this._openedSection)}j.classList.removeClass(b.CLS_CLOSED);j.classList.addClass(b.CLS_OPENED);this._openedSection=j}});c.view.Element.register(b,"accordion")})(oo||{});(function(g){var e=g.view.Dom,b=g.core.Touch;var h={};var a=g.getNS("oo.view.scroll").Scroll=g.Class(null,g.core.mixins.Events,{STATIC:{register:function k(l,m){if(h[m]){throw"Already existing codename"}h[m]=l},get:function c(l){if(l in h){return h[l]}else{throw"Invalid codename"}},unregister:function k(l){delete h[l]}},constructor:function d(){},scrollTo:function f(){throw"Can't be called directly from Scroll class"},refresh:function j(){throw"Can't be called directly from Scroll class"}})})(oo||{});(function(a){var d=a.view.Dom,f=a.view.scroll.Scroll;var e=a.getNS("oo.view.scroll").IScroll=a.Class(f,{_scroll:null,el:null,constructor:function c(g){if(undefined===g||!g.hasOwnProperty("el")||"object"!==typeof g){throw new Error('Missing options or missing "el" property in your options or options is not an object')}this.el=g.el;delete g.el;var h=!(this.el instanceof d);if("string"!==typeof this.el&&"undefined"===typeof this.el.nodeType&&h){throw new Error("el must be a Dom object, a oo.view.Dom or an identifier")}if(h){this.el=new d(this.el)}e.Super.call(this);this._scroll=new iScroll(this.el.getId(),g)},refresh:function b(){this._scroll.refresh()}});f.register(e,"iscroll")})(oo||{});